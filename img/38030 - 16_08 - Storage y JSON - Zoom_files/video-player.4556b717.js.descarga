(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-player"],{"0611":function(t,e,i){},"08b9":function(t,e,i){},"0d09":function(t,e,i){"use strict";i("1e2c")},"0fd5":function(t,e,i){"use strict";i("1e06")},"1e06":function(t,e,i){},"1e2c":function(t,e,i){},"21f9":function(t,e,i){"use strict";i("227a")},2208:function(t,e,i){},"227a":function(t,e,i){},"2ca0":function(t,e,i){"use strict";var n=i("23e7"),s=i("e330"),a=i("06cf").f,r=i("50c4"),o=i("577e"),l=i("5a34"),h=i("1d80"),c=i("ab13"),u=i("c430"),d=s("".startsWith),p=s("".slice),f=Math.min,m=c("startsWith"),g=!u&&!m&&!!function(){var t=a(String.prototype,"startsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!g&&!m},{startsWith:function(t){var e=o(h(this));l(t);var i=r(f(arguments.length>1?arguments[1]:void 0,e.length)),n=o(t);return d?d(e,n,i):p(e,i,i+n.length)===n}})},"325e":function(t,e,i){},3877:function(t,e,i){},"3be5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-player",class:t.videoPlayerCls},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowSharePanel(),expression:"shouldShowSharePanel()"}],ref:"playerShareWrapper",staticClass:"player-panel-l"},[i("div",{staticClass:"player-share",style:t.playerShareStyl},[t.shareMp4Url?i("video",{ref:"sharePlayer",staticClass:"video-js"}):t._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.shareStart&&t.shareMp4Url,expression:"shareStart && shareMp4Url"}],staticClass:"draggable"},[i("div",{staticClass:"bar",on:{mousedown:t.onMouseDown}})]),i("div",{ref:"panelR",staticClass:"player-panel-r",style:t.panelRStyl},[i("div",{ref:"playerViewWrapper",staticClass:"player-view-wrapper",style:t.playerViewWrapperStyl},[t.showGettyNotice?i("getty-notice",{ref:"gettyNotice"}):t._e(),i("div",{staticClass:"player-view",style:t.playerViewStyl,on:{contextmenu:function(t){t.preventDefault()}}},[i("video",{ref:"player",staticClass:"video-js"},[t.needLoadChapter?i("track",{attrs:{src:t.chapterUrl,kind:"chapters"}}):t._e(),t.ccUrl?i("track",{attrs:{id:"cc_track",src:t.ccUrl,kind:"captions",srclang:"en"}}):t._e(),t.transcriptUrl?i("track",{attrs:{id:"transcript_track",src:t.transcriptUrl,kind:"captions",srclang:"en"}}):t._e()])])],1),t.hasTranscript||t.hasChat?i("div",{staticClass:"transcript-wrapper",on:{contextmenu:function(t){t.stopPropagation()}}},[t.playerReady?i("transcript",{attrs:{player:t.player}}):t._e()],1):t._e()]),t.hasInterpreterList?i("video",{ref:"audioPlayer",staticClass:"video-js vjs-hidden"}):t._e()])},s=[],a=i("5530"),r=(i("a15b"),i("ac1f"),i("1276"),i("8a79"),i("d3b7"),i("159b"),i("30e2"),i("d721"),i("d4ec")),o=i("bee2"),l=i("99de"),h=i("262e"),c=i("2caf"),u=(i("fb6a"),i("498a"),i("d81d"),i("4de4"),i("f0e2")),d=i("e3e2"),p=i("2f62"),f=(i("ddb0"),i("c592")),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"zm-fade-in"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"},{name:"clickoutside",rawName:"v-clickoutside",value:t.handleOutsideClick,expression:"handleOutsideClick"}],staticClass:"vjs-pop-marker",attrs:{role:"tooltip","aria-label":t.content}},[i("div",{staticClass:"content"},[i("span",[t._v(t._s(t.content))])]),i("div",{staticClass:"time"},[i("span",[t._v(t._s(t.formattedTime))])])])])},g=[],v=(i("a9e3"),i("2cf8")),y=i("4b94"),b=i("8b55"),w={name:"vjs-marker-tip",mixins:[v["a"]],directives:{Clickoutside:y["a"]},props:{content:String,time:Number,reference:String},computed:Object(a["a"])({formattedTime:function(){return Object(b["e"])(this.time)}},Object(p["e"])(["popMenuShow"])),mounted:function(){this.popperElm=this.$el,this.referenceElm=this.$parent.$refs[this.reference]},methods:Object(a["a"])({show:function(){this.showPopper||(this.showPopper=!0,this.$emit("show"))},hide:function(){this.showPopper&&(this.showPopper=!1,this.$emit("hide"))},handleOutsideClick:function(){this.hide()}},Object(p["d"])({setPopMarkerShow:"SET_POP_MARKER_SHOW"})),watch:{showPopper:function(t){this.setPopMarkerShow(t)},popMenuShow:function(t){t&&this.hide()}}},C=w,x=(i("7d99"),i("2877")),P=Object(x["a"])(C,m,g,!1,null,"6c119804",null),M=P.exports,k={components:{VjsPopMarker:M},computed:Object(a["a"])(Object(a["a"])({},Object(p["e"])(["popMenuShow"])),Object(p["c"])(["hasThumbnail"])),methods:{onMouseEnterNew:function(){if(this.hasThumbnail){var t=this.player.thumbnailSprite(),e=t.thumbnailSpriteInstance;e.updateTime(this.time),e.updateName(this.content),e.updateMouseOnMaker(!0)}else this.onMouseEnter()},onMouseLeaveNew:function(){if(this.hasThumbnail){var t=this.player.thumbnailSprite(),e=t.thumbnailSpriteInstance;e.updateName(""),e.updateMouseOnMaker(!1)}else this.onMouseLeave()},onMouseDown:function(t){var e=0;this.hasThumbnail&&t.button===e&&(this.changeToCurrent(),t.preventDefault(),t.stopPropagation())},onMouseEnter:function(){this.popMenuShow||this.showPopMarker()},onMouseLeave:function(){this.hidePopMarker()},onFocus:function(){this.hasThumbnail||this.showPopMarker()},showPopMarker:function(){this.$refs.popMarker&&this.$refs.popMarker.show()},hidePopMarker:function(){this.$refs.popMarker&&this.$refs.popMarker.hide()},getMarkerStyl:function(){var t=parseInt(this.time/this.duration*1e4)/100;return{left:t+"%"}}}},T=i("bd41"),S=i("f5ea"),_={name:"vjs-share-marker",mixins:[f["a"],k],props:{cue:Object,player:Object,activePlayer:Object},data:function(){return{offset:"0, 11px"}},computed:Object(a["a"])({duration:function(){return this.player.duration()},content:function(){return this.cue.text},time:function(){return this.cue.startTime-this.offsetStart},ariaLabel:function(){return this.content+","+Object(S["a"])(this.time)}},Object(p["e"])(["offsetStart"])),render:function(){var t=arguments[0];return t("div",{class:"vjs-share-marker",style:this.getMarkerStyl(this.cue)},[t("span",{class:"vjs-share-marker-button",attrs:{role:"button","aria-label":this.ariaLabel,tabIndex:0},on:{mouseenter:this.onMouseEnterNew,mouseleave:this.onMouseLeaveNew,keydown:this.onKeyDown,focus:this.onFocus,mousedown:this.onMouseDown},ref:"button"}),t("vjs-pop-marker",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,content:this.content,time:this.time,reference:"button"},ref:"popMarker"})])},methods:{onKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;e===i.enter||e===i.space?(this.changeToCurrent(),t.preventDefault()):e!==i.tab&&e!==i.esc||(this.hidePopMarker(),e===i.esc&&t.preventDefault()),t.stopPropagation()},changeToCurrent:function(){Object(S["b"])("Position moved to Share Marker "+Object(S["a"])(this.time)),this.player.realCurrentTime(this.cue.startTime)}}},j=i("422e"),O=i("d3a4"),$=window.Vue,I=u["default"].getPlugin("plugin"),E=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;return Object(r["a"])(this,i),s=e.call(this,t,n),s.player=t,n.sharePlayer?(s.sharePlayer=n.sharePlayer,s.pollingCreateMarker(),s):Object(l["a"])(s)}return Object(o["a"])(i,[{key:"pollingCreateMarker",value:function(){var t=this.player,e=this;function i(){var n=e.getChapterTrack();n?(e.chapterTrack=n,Object(O["a"])().then((function(){e.createMarker(n,t),e.checkCueState(n),e.bindEvents(n)}))):setTimeout(i,500)}i()}},{key:"getChapterTrack",value:function(){for(var t=this.player.textTracks(),e=0;e<t.length;e++){var i=t[e];if("chapters"===i.kind&&i.cues)return i}}},{key:"createMarker",value:function(t,e){var i=t.cues,n=this.sharePlayer,s=new $({store:d["a"],render:function(t){return t(L,{props:{player:e,sharePlayer:n,cues:[].slice.call(i)}})}});s.$mount(),e.controlBar.progressControl.contentEl().appendChild(s.$el)}},{key:"checkCueState",value:function(t){var e=t.activeCues[0];!e||"Sharing Chapter"!==e.text.trim()&&"Sharing Started"!==e.text.trim()?this.player.trigger("share-start",!1):this.player.trigger("share-start",!0)}},{key:"bindChapterEvents",value:function(){var t=this;function e(){var i=t.getChapterTrack();i?(t.chapterTrack=i,t.checkCueState(i),t.bindEvents(i)):setTimeout(e,500)}e()}},{key:"disposed",value:function(){var t=this.player,e=this.chapterTrack;t.removeRemoteTextTrack(e)}},{key:"bindEvents",value:function(t){var e=this;t.addEventListener("cuechange",(function(){e.checkCueState(t)}))}}]),i}(I);u["default"].registerPlugin("shareMarker",E);var L={mixins:[j["a"]],components:{VjsShareMarker:_},props:{cues:{type:Array,default:function(){return[]}}},computed:Object(a["a"])({duration:function(){return this.player.duration()}},Object(p["e"])(["offsetStart"])),render:function(){var t=arguments[0];return t("div",{class:"vjs-share-markers-bar"},[this.renderMakers()])},methods:{renderMakers:function(){var t=this,e=this.$createElement;return this.cues.filter((function(e){var i=e.startTime-t.offsetStart;return!("Recording Started"===e.text.trim()||i<=0||i>t.duration)})).map((function(i,n){return e("vjs-share-marker",{attrs:{cue:i,player:t.player,"active-player":t.activePlayer},key:i.startTime+"/"+n})}))}}},A=(i("f063"),i("7db0"),i("4f0e")),D=i("d38d"),H=i("f33f"),B=window.Vue,R=u["default"].getPlugin("plugin"),W=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;return Object(r["a"])(this,i),s=e.call(this,t,n),s.sharePlayer=n.sharePlayer,s.createModelControl(t),s}return Object(o["a"])(i,[{key:"createModelControl",value:function(t){var e=this;Object(O["a"])().then((function(i){var n=e.sharePlayer,s=new B({store:d["a"],i18n:i,render:function(e){return e(V,{props:{player:t,sharePlayer:n}})}});s.$mount(),t.extendControl().addChild(s.$el)}))}}]),i}(R);u["default"].registerPlugin("playbackModel",W);var V={mixins:[j["a"],D["a"],f["a"],H["a"]],components:{VjsPopMenu:A["a"]},data:function(){return{menuItems:[{val:"AS",text:this.$t("speaker_view")},{val:"GV",text:this.$t("gallery_view")}]}},computed:Object(a["a"])({selectedItem:function(){var t=this;return this.menuItems.find((function(e){return e.val===t.playbackModel}))}},Object(p["e"])(["gallaryMp4Url","viewMp4Url","playbackModel"])),render:function(){var t=arguments[0];return t("div",{class:"vjs-playback-model-control",directives:[{name:"show",value:this.gallaryMp4Url}]},[t("button",{class:"vjs-playback-model-control-button vjs-control",on:{click:this.onControlClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave,keydown:this.onKeyDown},attrs:{"aria-haspopup":!0,"aria-label":"Playback Model","aria-expanded":this.getExpandState(),"aria-activedescendant":this.activedescendant,"aria-controls":this.getMenuId()}},[t("span",{attrs:{"arial-hidden":"true"},class:"vjs-icon-placeholder"})]),t("vjs-pop-menu",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,player:this.activePlayer,"menu-items":this.menuItems,"selected-item":this.selectedItem,"hover-index":this.hoverIndex},ref:"popMenu",on:{selected:this.handleCommand,hide:this.resetHoverIndex}}),t("vjs-pop-title",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,title:this.$t("switch_view")},ref:"popTitle"})])},methods:Object(a["a"])({onControlClick:function(){this.$refs.popMenu.show(),this.$refs.popTitle.hide()},handleCommand:function(t){this.setPlaybackModel(t.val);var e=this.player,i=e.currentTime(),n=document.activeElement;"GV"===t.val?e.src({type:"video/mp4",src:this.gallaryMp4Url}):e.src({type:"video/mp4",src:this.viewMp4Url}),e.one("canplay",(function(){e.currentTime(i),e.play(),n.focus()}))}},Object(p["b"])(["setPlaybackModel"]))},z=window.Vue,N=u["default"].getPlugin("plugin"),F=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;return Object(r["a"])(this,i),s=e.call(this,t,n),s.sharePlayer=n.sharePlayer,s.createComp(t),s}return Object(o["a"])(i,[{key:"createComp",value:function(t){var e=this;Object(O["a"])().then((function(i){var n=e.sharePlayer,s=new z({store:d["a"],i18n:i,render:function(e){return e(U,{props:{player:t,sharePlayer:n}})}});s.$mount(),t.extendControl().addChild(s.$el)}))}}]),i}(N);u["default"].registerPlugin("fullscreenToggle",F);var U={mixins:[j["a"],D["a"],f["a"]],data:function(){return{fullScreen:!1}},computed:{wrapperCls:function(){var t=["vjs-fullscreen-toggle-control"];return this.fullScreen?t.push("fullscreen-exit"):t.push("fullscreen-enter"),t.join(" ")},controlText:function(){return this.fullScreen?"Exit Full Screen":"Enter Full Screen"}},render:function(){var t=arguments[0];return t("div",{class:this.wrapperCls},[t("button",{class:"vjs-fullscreen-toggle-control-button vjs-control",attrs:{"aria-label":this.controlText},on:{click:this.onControlClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave,keydown:this.onKeyDown}},[t("span",{attrs:{"arial-hidden":"true"},class:"vjs-icon-placeholder"})]),t("vjs-pop-title",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,title:this.getTitle()},ref:"popTitle"})])},mounted:function(){var t=this,e=this.player,i=this.sharePlayer;e.on("fullscreenchange",(function(){t.handleFullscreenChange(e)})),i&&i.on("fullscreenchange",(function(){t.handleFullscreenChange(i)}))},methods:{handleFullscreenChange:function(t){var e=this;setTimeout((function(){e.fullScreen=t.isFullscreen()}),0)},onControlClick:function(){this.fullScreen?this.activePlayer.exitFullscreen():this.activePlayer.requestFullscreen()},onKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;e===i.enter&&this.onControlClick()},getTitle:function(){return this.fullScreen?this.player.localize("Non-Fullscreen"):this.player.localize("Fullscreen")}}},q=(i("3247"),i("2ca0"),i("335a")),K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.8125 9.21276C17.2919 9.41375 17.7023 9.74665 17.9983 10.1661C17.9994 10.1108 18 10.0555 18 10C18 5.58171 14.4183 2 10 2C5.58171 2 2 5.58171 2 10C2 14.4183 5.58171 18 10 18C11.4745 18 12.8558 17.6011 14.0419 16.9053C13.7371 16.6634 13.4848 16.3583 13.3048 16.0097C12.88 16.2438 12.4276 16.4342 11.9538 16.5747C12.385 15.8758 12.7441 14.952 13 13.876V11.75C13 11.2086 13.1564 10.7038 13.4265 10.2783C13.4279 10.1859 13.4286 10.0931 13.4286 10C13.4286 9.41157 13.4014 8.838 13.3497 8.28572H16.6411C16.7187 8.58721 16.7763 8.89672 16.8125 9.21276ZM12.2857 10C12.2857 9.40582 12.2563 8.83204 12.2015 8.28572H7.79854C7.74382 8.83204 7.71432 9.40582 7.71432 10C7.71432 10.5942 7.74379 11.168 7.79854 11.7143H12.2015C12.2563 11.168 12.2857 10.5942 12.2857 10ZM11.9538 3.42521C12.5158 4.33604 12.9553 5.62904 13.2034 7.14286H16.2354C15.4177 5.36129 13.859 3.9905 11.9538 3.42521ZM10.5318 3.44211C10.2653 3.17914 10.0869 3.14286 10 3.14286L9.99993 3.14282C9.91304 3.14282 9.73468 3.17907 9.46818 3.44207C9.19679 3.70993 8.89997 4.15414 8.62604 4.79332C8.3475 5.44321 8.11593 6.24025 7.95586 7.14286H12.0441C11.884 6.24025 11.6524 5.44325 11.3739 4.79336C11.1 4.15418 10.8031 3.70993 10.5318 3.44211ZM11.3739 15.2066C11.6525 14.5568 11.884 13.7598 12.0441 12.8571H7.95596C8.11604 13.7598 8.34764 14.5568 8.62614 15.2066C8.90007 15.8459 9.19689 16.2901 9.46829 16.558C9.73475 16.8209 9.91314 16.8571 10 16.8571C10.0869 16.8571 10.2653 16.8209 10.5318 16.558C10.8032 16.2901 11.1 15.8458 11.3739 15.2066ZM8.04618 16.5747C7.48429 15.6639 7.04471 14.371 6.79657 12.8571H3.76464C4.58229 14.6388 6.14104 16.0095 8.04618 16.5747ZM3.35889 11.7143H6.65032C6.59864 11.162 6.57143 10.5884 6.57143 10C6.57143 9.41157 6.59864 8.838 6.65032 8.28572H3.35889C3.21786 8.83364 3.14286 9.40804 3.14286 10C3.14286 10.592 3.21786 11.1664 3.35889 11.7143ZM3.76464 7.14286H6.79657C7.04471 5.629 7.48429 4.33607 8.04618 3.42521C6.14107 3.9905 4.58232 5.36129 3.76464 7.14286Z"}}),i("rect",{attrs:{x:"14",y:"10",width:"3.5",height:"6.5",rx:"1.75"}}),i("rect",{attrs:{x:"15.5",y:"16",width:"0.5",height:"2"}}),i("rect",{attrs:{x:"14",y:"18",width:"0.5",height:"3.5",rx:"0.25",transform:"rotate(-90 14 18)"}})])},J=[],G={name:"svgIcon",props:{size:Number}},X=G,Z=(i("adb9"),Object(x["a"])(X,K,J,!1,null,"0f841564",null)),Q=Z.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"zm-fade-in"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"vjs-pop-tips",attrs:{role:"tooltip",tabindex:"0","aria-label":t.ariaLabel}},[i("div",{staticClass:"vjs-pop-tips__content"},[i("div",{staticClass:"vjs-pop-tips__body"},[t.title?i("div",{staticClass:"vjs-pop-tips__title"},[i("span",[t._v(t._s(t.title))])]):t._e(),t.description?i("p",{staticClass:"vjs-pop-tips__description"},[t._v(t._s(t.description))]):t._e()]),t.closable?[i("zm-button",{staticClass:"vjs-pop-tips__close",staticStyle:{height:"24px"},attrs:{type:"icon",size:"large",ghost:"",icon:"zm-icon-close","aria-label":t.$t("close")},on:{click:function(e){return e.stopPropagation(),t.hide(e)}}})]:t._e()],2),i("div",{staticClass:"vjs-pop-tips__arrow"})])])},tt=[],et=(i("a4d3"),i("e01a"),{name:"vjs-pop-title",mixins:[v["a"]],props:{title:String,closable:Boolean,description:String,reference:[String,HTMLElement]},computed:Object(a["a"])(Object(a["a"])({},Object(p["e"])(["popMenuShow"])),{},{ariaLabel:function(){return this.title+" "+this.description}}),mounted:function(){var t=this;this.popperElm=this.$el,this.referenceElm=this.reference?"string"===typeof this.reference?this.$parent.$refs[this.reference]:this.reference:this.$parent.$el,setTimeout((function(){document.querySelector(".vjs-pop-tips .vjs-pop-tips__arrow").style.right="".concat(t.referenceElm.offsetParent.clientWidth-t.referenceElm.offsetLeft-14,"px")}),0)},methods:{show:function(){this.showPopper||(this.showPopper=!0,this.$emit("show"))},hide:function(){this.showPopper&&(this.showPopper=!1,this.$emit("hide"))}},watch:{popMenuShow:function(t){t&&this.hide()}}}),it=et,nt=(i("593a"),Object(x["a"])(it,Y,tt,!1,null,"8fa9592a",null)),st=nt.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"zm-fade-in"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"vjs-pop-title",attrs:{role:"tooltip","aria-label":t.title}},[t.loading?i("i",{staticClass:"zm-icon-loading"}):t._e(),i("span",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")])])])},rt=[],ot={name:"vjs-pop-loading",props:{title:String,loading:Boolean},data:function(){return{showPopper:!1}},computed:Object(a["a"])({},Object(p["e"])(["popMenuShow"])),mounted:function(){},methods:{show:function(){this.showPopper||(this.showPopper=!0,this.$emit("show"))},hide:function(){this.showPopper&&(this.showPopper=!1,this.$emit("hide"))}},watch:{popMenuShow:function(t){}}},lt=ot,ht=(i("f8f7"),Object(x["a"])(lt,at,rt,!1,null,"f26b6138",null)),ct=ht.exports,ut=window.Vue,dt=u["default"].getPlugin("plugin"),pt=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;return Object(r["a"])(this,i),s=e.call(this,t,n),s.sharePlayer=n.sharePlayer,s.synchronize=n.synchronize,s.createLanguageAudioLibControl(t),s}return Object(o["a"])(i,[{key:"createLanguageAudioLibControl",value:function(t){var e=this;Object(O["a"])().then((function(i){var n=e.sharePlayer,s=e.synchronize,a=new ut({store:d["a"],i18n:i,render:function(e){return e(ft,{props:{player:t,sharePlayer:n,synchronize:s}})}});a.$mount(),t.extendControl().addChild(a.$el),e.comp=a}))}}]),i}(dt);u["default"].registerPlugin("languageAudioLib",pt);var ft={mixins:[j["a"],f["a"],H["a"],D["a"]],components:{VjsPopMenu:A["a"],VjsPopTips:st,SvgIcon:Q,VjsPopLoading:ct},data:function(){return{popTitle:this.$t("language_interpretation")+" "+this.$t("language_origin"),loadingTitle:"",audioLoading:!1,audioEnded:!1,tipsContent:this.$t("interpretation_tips_content"),tipsTitle:this.$t("interpretation_tips_title")}},computed:Object(a["a"])({interpreterList:function(){return this.interpreterAudioList||[]},menuItems:function(){var t=this,e=this.interpreterList.map((function(e){var i=Object(a["a"])({},e),n=e.language;return n.startsWith("C-")?(i.text=n.substring(2),i.ariaText=n.substring(2)):(i.text=t.$t("language_".concat(n)),i.ariaText=t.$t("language_".concat(n))),i})),i=this.$t("language_origin");return e.unshift({language:"origin",audioUrl:"",text:i,ariaText:i,icon:"zm-icon-global"}),e},selectedItem:function(){var t=this;return this.menuItems.find((function(e){return e.language===t.language}))},customLanguageText:function(){return this.selectedItem?this.selectedItem.text.substring(0,1).toUpperCase():""},showLanguageTips:function(){return q["a"].get("cmr_video_language_tips",!1)},icon:function(){return this.selectedItem?this.selectedItem.icon:"zm-icon-global"},speedAriaLabel:function(){return"Playback Language"+(this.selectedItem?",".concat(this.selectedItem.ariaText):"")},useIcon:function(){return!this.selectedItem||"origin"===this.language}},Object(p["e"])(["language","interpreterAudioList"])),mounted:function(){this.showLanguageTips||this.$refs.popTips&&this.$refs.popTips.show()},render:function(){var t=this,e=arguments[0];return e("div",{class:"vjs-language-control"},[e("button",{class:"vjs-control",on:{click:this.onControlClick,keydown:this.onKeyDown,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave},attrs:{"aria-haspopup":!0,"aria-label":this.speedAriaLabel,"aria-expanded":this.getExpandState(),"aria-activedescendant":this.activedescendant,"aria-controls":this.getMenuId()}},[this.useIcon?e("svg-icon",{class:"white",attrs:{size:20}}):e("div",{class:"vjs-control__span"},[e("span",[this.icon])])]),e("vjs-pop-tips",{attrs:{placement:this.placement,offset:"0, 14px",modifiers:this.modifiers,"append-to-body":!1,title:this.tipsTitle,closable:!0,description:this.tipsContent},on:{hide:this.hideTips},ref:"popTips"}),e("vjs-pop-menu",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,player:this.activePlayer,"menu-items":this.menuItems,"selected-item":this.selectedItem,"hover-index":this.hoverIndex},ref:"popMenu",on:{selected:this.handleCommand,hide:this.resetHoverIndex},scopedSlots:{default:function(i){return"origin"!==i.language.language?e("div",{class:"vjs-control__span vjs-control__span--item",style:{borderColor:i.language.language===t.language?"#2D8CFF":"#98A0A9",color:i.language.language===t.language?"#2D8CFF":"#98A0A9"}},[e("span",[i.language.icon])]):e("svg-icon",{class:i.language.language===t.language?"blue":"grey",style:{marginRight:"2px"}})}}}),e("vjs-pop-title",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,title:this.popTitle},ref:"popTitle"}),e("vjs-pop-loading",{attrs:{title:this.loadingTitle,loading:!0},ref:"loadingPop"})])},methods:Object(a["a"])({onControlClick:function(){this.$refs.popMenu.show()},getCustomLanguageText:function(t){return t?t.substring(0,1).toUpperCase():""},hideTips:function(){q["a"].set("cmr_video_language_tips","true")},handleCommand:function(t){var e=this;if(t.language!==this.language){this.audioEnded=!1;var i=t.language;this.setLanguage(i),this.popTitle=this.$t("language_interpretation")+" "+t.text,this.$refs.popTitle.show(),"origin"!==t.language?this.synchronize.chooseAudio({type:"audio/mp4",src:t.audioUrl}):this.synchronize.chooseAudio();var n=setTimeout((function(){e.$refs.popTitle.hide()}),1e3),s=setTimeout((function(){e.player.paused()||(e.audioEnded=!0)}),1e3),a=this.player.currentTime();0===a||this.player.paused()||(this.synchronize.once("buffering",(function(){e.audioLoading||e.audioEnded||(e.audioLoading=!0,e.$refs.popTitle.hide(),n&&clearTimeout(n),e.loadingTitle=e.$t("interpretation_loading"),e.$refs.loadingPop.show())})),this.synchronize.once("buffered-and-auto-play",(function(){e.audioLoading&&(e.audioLoading=!1,s&&clearTimeout(s),e.$refs.popTitle.hide(),e.$refs.loadingPop.hide())})))}}},Object(p["d"])({setLanguage:"SET_LANGUAGE"}))},mt=i("3e2c"),gt=window.Vue,vt=u["default"].getPlugin("plugin"),yt=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;return Object(r["a"])(this,i),s=e.call(this,t,n),s.sharePlayer=n.sharePlayer,s.createCaptionsControl(t),s.bindEvents(),s}return Object(o["a"])(i,[{key:"createCaptionsControl",value:function(t){var e=this;Object(O["a"])().then((function(i){var n=e.sharePlayer,s=new gt({store:d["a"],i18n:i,render:function(e){return e(bt,{props:{player:t,sharePlayer:n},ref:"comp"})}});s.$mount(),t.extendControl().addChild(s.$el),e.captionsComp=s}))}},{key:"bindEvents",value:function(){var t=this,e=this.player,i=e.textTrackDisplay.contentEl(),n=0;e.on("player-resize",(function(e,s){var a=s.mainPlayerWidth,r=t.getFontSizeByWidth(a);r!==n&&(0!==n&&Object(mt["c"])(i,"font-"+n),n=r,Object(mt["a"])(i,"font-"+r))}))}},{key:"getFontSizeByWidth",value:function(t){return t<=1e3?16:16+Math.round(.016*(t-1e3))}}]),i}(vt);u["default"].registerPlugin("captions",yt);var bt={mixins:[j["a"],D["a"],f["a"],H["a"]],components:{VjsPopMenu:A["a"]},data:function(){return{currentCaptions:null}},computed:Object(a["a"])({selectedItem:function(){var t=this;return this.menuItems.find((function(e){return e.val===t.currentCaptions}))},menuItems:function(){var t=[];return this.ccUrl&&t.push({val:"cc",text:this.$t("cc_transcript")}),this.transcriptUrl&&t.push({val:"audio",text:this.$t("audio_transcript")}),t.length&&t.unshift({val:null,text:this.$t("no_transcript")}),t},hasPopup:function(){return this.menuItems.length>2},captionsAriaLabel:function(){return this.hasPopup?"Subtitles/closed captions":null!==this.currentCaptions?"Hide Subtitles/closed captions":"Show Subtitles/closed captions"}},Object(p["e"])(["ccUrl","transcriptUrl"])),render:function(){var t=arguments[0];return t("div",{class:this.getCaptionsClass(),directives:[{name:"show",value:this.menuItems.length}]},[t("button",{class:"vjs-captions-control-button vjs-control",on:{click:this.onControlClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave,keydown:this.onMyKeyDown},attrs:{"aria-haspopup":this.hasPopup,"aria-label":this.captionsAriaLabel,"aria-expanded":this.getMyExpandState(),"aria-activedescendant":this.activedescendant,"aria-controls":this.getMyMenuId()}},[t("span",{attrs:{"arial-hidden":"true"},class:"vjs-icon-placeholder"})]),t("vjs-pop-menu",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,"menu-items":this.menuItems,"selected-item":this.selectedItem,"hover-index":this.hoverIndex},ref:"popMenu",on:{selected:this.handleCommand,hide:this.resetHoverIndex}}),t("vjs-pop-title",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,title:this.getTitle()},ref:"popTitle"})])},mounted:function(){this.currentCaptions=this.ccUrl?"cc":null},methods:{getCaptionsClass:function(){var t=["vjs-captions-control"];return null!==this.currentCaptions&&t.push("use-transcript"),t.join(" ")},getMyExpandState:function(){return!!this.hasPopup&&this.getExpandState()},getMyMenuId:function(){return!!this.hasPopup&&this.getMenuId()},onMyKeyDown:function(t){if(!this.hasPopup){var e=t.keyCode,i=T["a"].keys;if(e!==i.space)return}this.onKeyDown(t)},onControlClick:function(){this.menuItems.length>2?(this.$refs.popMenu.show(),this.$refs.popTitle.hide()):null===this.currentCaptions?this.currentCaptions=this.menuItems[1].val:this.currentCaptions=this.menuItems[0].val},handleCommand:function(t){this.currentCaptions=t.val},getTitle:function(){return this.menuItems.length>2?this.$t("subtitle"):null===this.currentCaptions?this.$t("show_subtitle"):this.$t("hide_subtitle")},closeCaptions:function(){for(var t=this.player.textTracks(),e=0;e<t.length;e++){var i=t[e];"captions"===i.kind&&(i.mode="hidden")}},openCaptions:function(t){for(var e=this.player.textTracks(),i=0;i<e.length;i++){var n=e[i];"captions"===n.kind&&(n.mode="hidden",("cc"===t&&"cc_track"===n.id||"audio"===t&&"transcript_track"===n.id)&&(n.mode="showing"))}}},watch:{currentCaptions:{immediate:!0,handler:function(t){null===t?this.closeCaptions():this.openCaptions(t)}}}},wt=i("20d7"),Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"zm-fade-in"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"},{name:"clickoutside",rawName:"v-clickoutside",value:t.handleOutsideClick,expression:"handleOutsideClick"}],staticClass:"vjs-context-menu",on:{contextmenu:function(t){t.preventDefault()}}},[t.reference?t._e():i("div",{ref:"reference",staticClass:"reference",style:t.referenceStyl}),i("ul",{directives:[{name:"uid",rawName:"v-uid",value:"vjs-context-menu",expression:"'vjs-context-menu'"}],ref:"list",staticClass:"list",attrs:{role:"menu"}},t._l(t.commands,(function(e,n){return i("li",{directives:[{name:"uid",rawName:"v-uid",value:"vjs-context-menu-item",expression:"'vjs-context-menu-item'"}],key:e.action,ref:"item",refInFor:!0,class:{"is-hover":t.hoverIndex===n},attrs:{role:"menuitem"},on:{click:function(i){return t.onItemClick(e)},mousedown:function(t){t.stopPropagation()}}},[i("span",[t._v(t._s(e.text))])])})),0)])])},xt=[],Pt=(i("a434"),[]);function Mt(t){Pt.push(t),Tt(t)}function kt(t){Pt.splice(Pt.indexOf(t),1)}function Tt(t){t.$on("show",(function(){Pt.forEach((function(e){e!==t&&e.hide()}))}))}var St=i("b617"),_t={name:"vjs-context-menu",mixins:[v["a"]],directives:{Clickoutside:y["a"],Uid:St["a"]},props:{pos:Object,reference:String,commands:Array,player:Object,hoverIndex:Number},computed:{referenceStyl:function(){return{left:this.pos.x?this.pos.x+"px":"50%",top:this.pos.y?this.pos.y+"px":"50%"}}},inject:["menu"],mounted:function(){this.reference?(this.popperElm=this.$el,this.referenceElm=this.$parent.$refs[this.reference]):(this.popperElm=this.$refs.list,this.referenceElm=this.$refs.reference);for(var t=this.$refs.item,e=0;e<t.length;e++)this.menu.options.push(t[e]);Mt(this)},beforeDestroy:function(){kt(this)},methods:Object(a["a"])({show:function(){this.showPopper||(this.showPopper=!0,this.$emit("show"))},hide:function(){this.showPopper&&(this.showPopper=!1,this.$emit("hide"))},handleOutsideClick:function(){this.hide()},onItemClick:function(t){this.hide(),this.$emit("command",t)}},Object(p["d"])({setPopMenuShow:"SET_POP_MENU_SHOW"})),watch:{pos:function(){this.updatePopper()},showPopper:function(t){this.setPopMenuShow(t)}}},jt=_t,Ot=(i("0fd5"),Object(x["a"])(jt,Ct,xt,!1,null,"3fbe9509",null)),$t=Ot.exports,It=window.Vue,Et=u["default"].getPlugin("plugin"),Lt=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;return Object(r["a"])(this,i),s=e.call(this,t,n),s.sharePlayer=n.sharePlayer,d["a"].state.hasPermissionEdit&&!d["a"].state.trimming&&s.createContextMenu(t),s}return Object(o["a"])(i,[{key:"createContextMenu",value:function(t){var e=this;Object(O["a"])().then((function(i){var n=e.sharePlayer,s=new It({i18n:i,store:d["a"],render:function(e){return e(At,{props:{player:t,sharePlayer:n}})}});s.$mount(),t.contentEl().appendChild(s.$el),e.contextMenuComp=s}))}}]),i}(Et);u["default"].registerPlugin("contextMenu",Lt);var At={mixins:[j["a"],f["a"],wt["a"]],components:{VjsContextMenu:$t},data:function(){return{pos:{x:0,y:0},modifiers:{preventOverflow:{boundariesElement:this.player.contentEl(),padding:5},computeStyle:{gpuAcceleration:!1}},commands:[{text:this.$t("add_chapter"),action:"add-chapter"}],options:[]}},provide:function(){return{menu:this}},render:function(t){return t($t,{props:{placement:"bottom-start",modifiers:this.modifiers,pos:this.pos,player:this.activePlayer,commands:this.commands,appendToBody:!1,hoverIndex:this.hoverIndex},ref:"contextMenu",on:{command:this.handleCommand,hide:this.resetHoverIndex}})},mounted:function(){this.focusPlayerEl(),this.initAria(),this.bindEvents()},methods:{initAria:function(){var t=this.player,e=this.sharePlayer,i=t.contentEl().querySelector(".vjs-tech"),n="Video Player, press Shift+F10 for more options";if(i.setAttribute("aria-label",n),i.setAttribute("aria-haspopup",!0),i.setAttribute("aria-controls",this.getMenuId()),i.setAttribute("aria-expanded",!!this.isMenuVisible()),e){var s=e.contentEl().querySelector(".vjs-tech");s.setAttribute("aria-label",n),s.setAttribute("aria-haspopup",!0),s.setAttribute("aria-controls",this.getMenuId()),s.setAttribute("aria-expanded",!!this.isMenuVisible())}},getMenuId:function(){return this.$refs.contextMenu?this.$refs.contextMenu.$refs.list.id:null},bindEvents:function(){var t=this,e=this.player,i=this.sharePlayer,n=e.contentEl().querySelector(".vjs-tech");if(n.addEventListener("contextmenu",(function(i){i.preventDefault(),(e.isFullscreen()||t.activePlayer===e)&&t.showContextMenu(i)})),n.addEventListener("keydown",(function(i){(e.isFullscreen()||t.activePlayer===e)&&t.onKeyDown(i)})),i){var s=i.contentEl().querySelector(".vjs-tech");s.addEventListener("contextmenu",(function(e){e.preventDefault(),t.showContextMenu(e)})),s.addEventListener("keydown",(function(e){t.onKeyDown(e)}))}var a=e.controlBar.contentEl();a.addEventListener("contextmenu",(function(t){t.preventDefault()}))},focusPlayerEl:function(){this.updateAriaAttr("tabindex",0)},showContextMenu:function(t){this.pos={x:t.offsetX,y:t.offsetY},this.$refs.contextMenu.show(),this.updateAriaAttr("aria-expanded",!0)},updateAriaAttr:function(t,e,i){var n=this.player,s=this.sharePlayer,a=n.contentEl().querySelector(".vjs-tech");if(a.setAttribute(t,e),!e&&i&&a.removeAttribute(t),s){var r=s.contentEl().querySelector(".vjs-tech");r.setAttribute(t,e),!e&&i&&r.removeAttribute(t)}},hideContextMenu:function(){this.$refs.contextMenu.hide(),this.updateAriaAttr("aria-expanded",!1)},onKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;if(t.shiftKey&&121===e)this.showContextMenu(t);else switch(e){case i.enter:if(this.isMenuVisible()){var n=this.commands[this.hoverIndex];n&&(this.handleCommand(n),this.hideContextMenu())}t.preventDefault();break;case i.space:case i.tab:this.hideContextMenu();break;case i.esc:this.hideContextMenu(),t.preventDefault();break;case i.down:this.isMenuVisible()&&this.navigateOptions("next"),t.preventDefault();break;case i.up:this.isMenuVisible()&&this.navigateOptions("prev"),t.preventDefault();break;case i.home:this.isMenuVisible()&&this.navigateOptions("home"),t.preventDefault();break;case i.end:this.isMenuVisible()&&this.navigateOptions("end"),t.preventDefault();break}},isMenuVisible:function(){return this.$refs.contextMenu&&this.$refs.contextMenu.showPopper},handleCommand:function(t){this.player.trigger(t.action)}},watch:{activedescendant:function(t){this.updateAriaAttr("aria-activedescendant",t,!0)},activePlayer:function(){var t=this.player,e=this.sharePlayer,i=t.contentEl().querySelector(".vjs-tech"),n=e.contentEl().querySelector(".vjs-tech");this.activePlayer===e?(n.setAttribute("tabindex",0),i.setAttribute("tabindex",-1),document.activeElement===i&&n.focus()):(i.setAttribute("tabindex",0),n.setAttribute("tabindex",-1),document.activeElement===n&&i.focus())}}},Dt=(i("b680"),i("5c8a")),Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("zm-dialog",{staticClass:"chapter-editor",attrs:{visible:t.visible,title:t.$t("edit_chapter"),width:"500px","append-to-body":""},on:{"update:visible":function(e){t.visible=e}}},[i("zm-input",{attrs:{type:"textarea",autosize:"",maxlength:150},model:{value:t.section.content,callback:function(e){t.$set(t.section,"content",e)},expression:"section.content"}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("zm-button",{staticClass:"btn-delete",attrs:{type:"danger",loading:t.deleteLoading},on:{click:t.deleteSection}},[t._v(" "+t._s(t.$t("delete"))+" ")]),i("zm-button",{attrs:{type:"primary",loading:t.saveLoading,disabled:!t.section.content||!t.section.content.trim()},on:{click:t.saveSection}},[t._v(" "+t._s(t.$t("save"))+" ")]),i("zm-button",{on:{click:t.cancel}},[t._v(" "+t._s(t.$t("cancel"))+" ")])],1)],1)},Bt=[],Rt={name:"chapter-editor",props:{sections:Array,section:Object},data:function(){return{visible:!1,saveLoading:!1,deleteLoading:!1}},methods:Object(a["a"])({show:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.originContent=t.section.content}))},hide:function(){this.visible=!1},deleteSection:function(){var t=this;this.sections.splice(this.sections.indexOf(this.section),1),this.deleteLoading=!0,this.updateChapterSections(this.sections).then((function(){t.deleteLoading=!1,t.$message.success(t.$t("remove_chapter_marker")),t.hide()})).catch((function(e){t.deleteLoading=!1,t.cancel(),t.$message.error(e.message)}))},saveSection:function(){var t=this;this.saveLoading=!0,this.updateChapterSections(this.sections).then((function(){t.saveLoading=!1,t.$message.success(t.$t("update_chapter_marker")),t.hide()})).catch((function(e){t.saveLoading=!1,t.cancel(),t.$message.error(e.message)}))},cancel:function(){this.section.content=this.originContent,this.hide()}},Object(p["b"])(["updateChapterSections"]))},Wt=Rt,Vt=(i("0d09"),Object(x["a"])(Wt,Ht,Bt,!1,null,"52f80e6b",null)),zt=Vt.exports,Nt={name:"vjs-chapter-marker",mixins:[f["a"],k,wt["a"]],components:{VjsContextMenu:$t},props:{section:Object,player:Object,activePlayer:Object},data:function(){return{offset:"0, 11px",commands:[{text:this.$t("edit_chapter"),action:"edit-chapter"},{text:this.$t("remove_chapter"),action:"remove-chapter"}],options:[]}},computed:Object(a["a"])(Object(a["a"])({duration:function(){return this.player.duration()},content:function(){return this.section.content},time:function(){return this.section.startTime-this.offsetStart},ariaLabel:function(){return this.content+","+Object(S["a"])(this.time)}},Object(p["e"])(["offsetStart","hasPermissionEdit","trimming"])),Object(p["c"])(["hasThumbnail"])),provide:function(){return{menu:this}},render:function(){var t=arguments[0];return t("div",{class:"vjs-chapter-marker",style:this.getMarkerStyl(this.section),on:{mousemove:this.onMouseMove}},[t("span",{class:"vjs-chapter-marker-button",attrs:{role:"button","aria-haspopup":this.hasPermissionEdit,"aria-label":this.ariaLabel,"aria-expanded":this.getExpandState(),"aria-activedescendant":this.activedescendant,"aria-controls":this.getMenuId(),tabIndex:0},on:{mouseenter:this.onMouseEnterNew,mouseleave:this.onMouseLeaveNew,contextmenu:this.onContextMenu,keydown:this.onKeyDown,focus:this.onFocus,mousedown:this.onMouseDown},ref:"button"}),t("vjs-pop-marker",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,content:this.content,time:this.time,reference:"button"},ref:"popMarker"}),t("vjs-context-menu",{attrs:{placement:"bottom-start",offset:"0,10px",modifiers:this.modifiers,"append-to-body":!1,player:this.activePlayer,reference:"button",commands:this.commands,"hover-index":this.hoverIndex},ref:"contextMenu",on:{command:this.handleCommand,hide:this.resetHoverIndex}})])},methods:{onMouseMove:function(t){this.hasThumbnail&&t.target!==this.$refs.button&&(t.stopPropagation(),t.preventDefault())},onContextMenu:function(t){t.stopPropagation(),t.preventDefault(),this.conditionShowContextMenu()},conditionShowContextMenu:function(){this.hasPermissionEdit&&!this.trimming&&(this.hidePopMarker(),this.showContextMenu())},getExpandState:function(){var t=this.$refs.contextMenu;return t?String(t.showPopper):"false"},getMenuId:function(){return this.$refs.contextMenu?this.$refs.contextMenu.$refs.list.id:null},onKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;if(t.shiftKey&&121===e)this.conditionShowContextMenu();else{switch(e){case i.enter:if(this.isMenuVisible()){var n=this.commands[this.hoverIndex];n&&(this.$emit("command",n.action,this.section),this.hideContextMenu())}else this.changeToCurrent();t.preventDefault();break;case i.space:this.isMenuVisible()||this.changeToCurrent(),t.preventDefault();break;case i.tab:this.hidePopMarker(),this.hideContextMenu();break;case i.esc:this.hidePopMarker(),this.hideContextMenu(),t.preventDefault();break;case i.down:this.isMenuVisible()&&this.navigateOptions("next"),t.preventDefault();break;case i.up:this.isMenuVisible()&&this.navigateOptions("prev"),t.preventDefault();break;case i.home:this.isMenuVisible()&&this.navigateOptions("home"),t.preventDefault();break;case i.end:this.isMenuVisible()&&this.navigateOptions("end"),t.preventDefault();break}t.stopPropagation()}},changeToCurrent:function(){Object(S["b"])("Position moved to Chapter Marker "+Object(S["a"])(this.time)),this.player.realCurrentTime(this.section.startTime)},showContextMenu:function(){this.$refs.contextMenu&&this.$refs.contextMenu.show()},hideContextMenu:function(){this.$refs.contextMenu&&this.$refs.contextMenu.hide()},isMenuVisible:function(){return this.$refs.contextMenu&&this.$refs.contextMenu.showPopper},handleCommand:function(t){this.$emit("command",t.action,this.section)}}},Ft=window.Vue,Ut=u["default"].getPlugin("plugin"),qt=24,Kt=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;return Object(r["a"])(this,i),s=e.call(this,t,n),s.sharePlayer=n.sharePlayer,s.createMarker(t),s}return Object(o["a"])(i,[{key:"createMarker",value:function(t){var e=this.sharePlayer;Object(O["a"])().then((function(i){var n=new Ft({i18n:i,store:d["a"],render:function(i){return i(Jt,{props:{player:t,sharePlayer:e}})}});n.$mount(),t.controlBar.progressControl.contentEl().appendChild(n.$el)}))}}]),i}(Ut);u["default"].registerPlugin("chapterMarker",Kt);var Jt={mixins:[j["a"]],components:{ChapterEditor:zt,VjsChapterMarker:Nt},data:function(){return{editSection:{}}},computed:Object(a["a"])({duration:function(){return this.player.duration()},clonedSections:function(){return Object(Dt["a"])(this.chapterSections)}},Object(p["e"])(["offsetStart","chapterSections"])),render:function(){var t=arguments[0];return t("div",{class:"vjs-chapter-markers-bar"},[this.renderMakers(),t("div",[t("chapter-editor",{attrs:{section:this.editSection,sections:this.clonedSections},ref:"editor"})])])},mounted:function(){this.player.on("add-chapter",this.addChapter)},methods:Object(a["a"])({renderMakers:function(){var t=this,e=this.$createElement;return this.clonedSections.filter((function(e){var i=e.startTime-t.offsetStart;return!(i<0||i>t.duration)})).map((function(i,n){return e("vjs-chapter-marker",{attrs:{section:i,player:t.player,"active-player":t.activePlayer},key:i.startTime+"/"+n,on:{command:t.handleCommand}})}))},handleCommand:function(t,e){"edit-chapter"===t?(this.editSection=e,this.exitFullscreen(),this.$refs.editor.show()):"remove-chapter"===t&&this.removeChapter(e)},exitFullscreen:function(){var t=this.player,e=this.sharePlayer;t.isFullscreen()?t.exitFullscreen():e&&e.isFullscreen()&&e.exitFullscreen()},removeChapter:function(t){var e=this;this.clonedSections.splice(this.clonedSections.indexOf(t),1),this.updateChapterSections(this.clonedSections).then((function(){e.$message.success(e.$t("remove_chapter_marker"))})).catch((function(t){e.$message.error(t.message)}))},addChapter:function(){var t=this,e=this.clonedSections.length;if(e>=qt)return this.exitFullscreen(),void this.$message.warning(this.$t("add_tips"));var i=this.$t("auto_title",[e+1]),n=1*this.player.realCurrentTime().toFixed(3);this.clonedSections.push({content:i,startTime:n}),this.updateChapterSections(this.clonedSections).then((function(){t.$message.success(t.$t("add_chapter_marker")),Object(S["b"])("Chapter Marker added at "+Object(b["e"])(t.player.currentTime()))})).catch((function(e){t.$message.error(e.message)}))}},Object(p["b"])(["updateChapterSections"]))},Gt=(i("a9ee"),i("72c2"),i("6661"),i("ef2d"),i("ef84"),i("b0c0"),{name:"vjs-polling-marker",mixins:[f["a"],k],props:{poll:Object,player:Object,activePlayer:Object},data:function(){return{offset:"0, 11px"}},computed:Object(a["a"])({duration:function(){return this.player.duration()},content:function(){return this.poll.name},time:function(){return this.poll.shareTimeInRecording-this.offsetStart},ariaLabel:function(){return"Poll Result "+this.content+","+Object(S["a"])(this.time)}},Object(p["e"])(["offsetStart"])),render:function(){var t=arguments[0];return t("div",{class:"vjs-polling-marker",style:this.getMarkerStyl(this.poll)},[t("span",{class:"vjs-polling-marker-button",attrs:{role:"button","aria-label":this.ariaLabel,tabIndex:0},on:{mouseenter:this.onMouseEnterNew,mouseleave:this.onMouseLeaveNew,keydown:this.onKeyDown,focus:this.onFocus,mousedown:this.onMouseDown},ref:"button"}),t("vjs-pop-marker",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,content:this.content,time:this.time,reference:"button"},ref:"popMarker"})])},methods:{onMouseDown:function(t){this.handleManual(),t.preventDefault(),t.stopPropagation()},onKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;e===i.enter||e===i.space?(this.handleManual(),t.preventDefault()):e!==i.tab&&e!==i.esc||(this.hidePopMarker(),e===i.esc&&t.preventDefault()),t.stopPropagation()},handleManual:function(){this.$emit("manual",this.poll)}}}),Xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.poll?i("zm-dialog",{staticClass:"poll-dialog",attrs:{title:t.poll.name,visible:t.visible,"append-to-body":"",width:"560px","aria-describedby":"pollsDesc"},on:{"update:visible":function(e){t.visible=e}}},[i("zm-scrollbar",{ref:"scrollbar",staticStyle:{height:"350px"},attrs:{"wrap-style":"overflow-x:hidden;"}},[i("div",{staticClass:"polling-question",attrs:{id:"pollsDesc"}},t._l(t.poll.questions,(function(e,n){return i("poll-question-item",{key:e.questionId,attrs:{question:e,index:n,advance:t.advance}})})),1)]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("zm-button",{attrs:{plain:""},on:{click:t.hide}},[t._v(" "+t._s(this.$t("close"))+" ")])],1)],1):t._e()},Zt=[],Qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poll-question-item"},[i("h4",{staticClass:"title"},[i("span",[t._v(t._s(t.questionIndex))]),i("span",{staticClass:"polling-question-title mgr-xs"},[t._v(" "+t._s(t.questionTitle)+" ")]),i("span",{staticClass:"question-type"},[t._v(" "+t._s(t.questionType)+" ")])]),t.advance?i("div",{staticClass:"advance"},[t.showProgress?i("zm-progress",{staticClass:"mgt-md mgb-sm answer-percent-progress",attrs:{color:t.color,percentage:t.answerPercentage,"show-text":!1}}):t._e(),i("p",{staticClass:"answer-percent"},[t._v(" "+t._s(t.answeredPercent)+" ")]),t._l(t.possibleAnswers,(function(e,n){return i("poll-option-item-new",{key:e.id,attrs:{option:e,index:n,advance:t.matchingOrRankOrder,isMatching:t.isMatching,isRatingScale:t.isRatingScale,matchingOrRankOrderAnswer:t.matchingOrRankOrderAnswer}})})),t.matchingOrRankOrder?i("div",{staticClass:"possible-answer-container"},t._l(t.matchingOrRankOrderAnswer,(function(e,n){return i("div",{key:e.id,staticClass:"possible-answer-item mgr-md"},[i("span",{staticClass:"mgr-xs circle",style:t.getCircleStyle(n)}),t._v(" "+t._s(e.value)+" ")])})),0):t._e(),t.rightAnswers?i("div",{staticClass:"correct-answer-container mgt-md"},[t.matchingOrRankOrder?i("div",[i("div",[t._v(t._s(t.$t("correct_answer")))]),t._l(t.rightAnswers,(function(e,n){return i("div",{key:e.id},[t._v(" "+t._s(t.rightItem(e,n))+" ")])}))],2):i("div",[1===t.rightAnswers.length?i("div",[i("span",{staticClass:"mgr-xs"},[t._v(t._s(t.$t("correct_answer_is")))]),i("span",{staticClass:"is-bold answer"},[t._v(t._s(t.correctAnswer))])]):i("div",[i("span",{staticClass:"mgr-xs"},[t._v(t._s(t.$t("correct_answer")))]),t._v(" "+t._s(t.correctAnswer)+" ")])])]):t._e()],2):t._l(t.question.optionsList,(function(t){return i("poll-option-item",{key:t.optionId,attrs:{option:t}})}))],2)},Yt=[],te=(i("e9c4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-container"},[i("div",{staticClass:"option-des"},[i("span",{staticClass:"option-value"},[t._v(t._s(t.option.option))]),i("span",{staticClass:"option-statistics"},[t._v(t._s(t.optionStatistics))])]),i("zm-progress",{attrs:{color:t.color,percentage:t.optionPercentage,"show-text":!1}})],1)}),ee=[],ie={name:"poll-option-item",props:{option:Object},computed:{optionStatistics:function(){return"".concat(this.option.votePercent,"%")},optionPercentage:function(){return parseInt(this.option.votePercent)},color:function(){return"100"===this.option.votePercent?"#00A832":"#0E72ED"}}},ne=ie,se=(i("21f9"),Object(x["a"])(ne,te,ee,!1,null,"88cf9fbc",null)),ae=se.exports,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-container",class:{"is-active":t.isActive},on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},[t.isRatingScale?[i("div",{staticClass:"option-des rating-scale"},[i("span",{staticClass:"option-str"},[t._v(t._s(t.optionStr))]),i("zm-progress",{staticClass:"flex-one",attrs:{color:t.color,percentage:t.optionPercentage}})],1)]:[i("div",{staticClass:"option-des"},[i("span",{staticClass:"option-value"},[t._v(t._s(t.optionStr))]),i("span",{staticClass:"option-statistics"},[t._v(t._s(t.optionStatistics))])]),t.advance?i("div",{staticClass:"advance-progress"},[i("div",{staticClass:"zm-progress zm-progress--line zm-progress--without-text",attrs:{role:"progressbar","aria-valuenow":t.optionPercentage,"aria-valuemin":"0","aria-valuemax":"100"}},[i("div",{staticClass:"zm-progress-bar"},[i("div",{staticClass:"zm-progress-bar__outer",staticStyle:{height:"6px"}},t._l(t.validAnswerResult,(function(e){return i("div",{key:e.id,staticClass:"zm-progress-bar__inner",style:t.getProgressStyle(e)})})),0)])])]):i("zm-progress",{attrs:{color:t.color,percentage:t.optionPercentage,"show-text":!1}})],t.advance?i("div",{staticClass:"tooltip",style:{bottom:t.bottom+"px"}},[i("div",{staticClass:"answer-desc mgb-xs"},[t._v(t._s(t.option.value))]),t._l(t.option.answerResults,(function(e){return i("div",{key:e.id,staticClass:"answer-item"},[i("div",{staticClass:"flex-one text"},[i("span",{staticClass:"mgr-xs circle",style:t.getCircleStyle(e)}),t._v(" "+t._s(e.value)+" ")]),i("div",{staticClass:"percent"},[t._v(t._s(t.answerStr(e.votePercent)))])])}))],2):t._e()],2)},oe=[],le=i("54b4"),he={name:"poll-option-item-new",props:{option:Object,advance:Boolean,isMatching:Boolean,isRatingScale:Boolean,index:Number,matchingOrRankOrderAnswer:Array},data:function(){return{isActive:!1,bottom:0}},computed:{optionStr:function(){var t=this.option,e=this.isRatingScale?t.id:t.value,i=le["d"][this.index]+". "+e;return this.isMatching?i:e},optionStatistics:function(){return"".concat(this.option.votePercent,"%")},optionPercentage:function(){return parseInt(this.option.votePercent)},color:function(){return"100"===this.option.votePercent?"#00A832":"#0E72ED"},validAnswerResult:function(){return this.option.answerResults&&this.option.answerResults.filter((function(t){return"0"!==t.votePercent}))}},methods:{getProgressStyle:function(t){var e=t.votePercent+"%",i=this.getIndexById(this.matchingOrRankOrderAnswer,t.id),n=le["a"][i];return{width:e,backgroundColor:n}},getIndexById:function(t,e){for(var i,n=t.length,s=0;s<n;s++)if(e===t[s].id){i=s;break}return i},getCircleStyle:function(t){var e=this.getIndexById(this.matchingOrRankOrderAnswer,t.id),i=le["a"][e];return{color:i,borderColor:i}},answerStr:function(t){return"".concat(t,"%")},onMouseEnter:function(t){var e=t.target.getBoundingClientRect();this.bottom=document.documentElement.clientHeight-(e.top+10),this.isActive=!0,t.stopPropagation(),t.preventDefault()},onMouseLeave:function(t){this.isActive=!1,t.stopPropagation(),t.preventDefault()}}},ce=he,ue=(i("c013"),Object(x["a"])(ce,re,oe,!1,null,"786566c2",null)),de=ue.exports,pe={name:"poll-question-item",components:{PollOptionItem:ae,PollOptionItemNew:de},props:{question:Object,index:Number,advance:Boolean},computed:{questionIndex:function(){return"".concat(this.index+1,".")},questionTitle:function(){return this.question.name},questionType:function(){var t=this.question.type,e="";switch(t){case le["h"].singleChoice:e=this.$t("single_choice");break;case le["h"].multipleChoice:e=this.$t("multiple_choice");break;case le["h"].matching:e=this.$t("matching");break;case le["h"].rankOrder:e=this.$t("rank_order");break;case le["h"].shortAnswer:e=this.$t("short_answer");break;case le["h"].longAnswer:e=this.$t("long_answer");break;case le["h"].blank:e=this.$t("blank");break;case le["h"].ratingScale:e=this.$t("rating_scale");break}return"(".concat(e,")")},showProgress:function(){var t=this.question.type;return t===le["h"].shortAnswer||t===le["h"].longAnswer||t===le["h"].blank},rightAnswers:function(){var t=this.question.pollingQuestionOptions;return t&&t.rightAnswers},answerPercentage:function(){return parseInt(this.question.answerPercent)},color:function(){return"100"===this.question.answerPercent?"#00A832":"#0E72ED"},answeredPercent:function(){var t=this.question.answerPercent+"%";return this.rightAnswers?this.$t("answered_correct",{percent:t}):this.$t("answered",{percent:t})},possibleAnswers:function(){var t=this.question.pollingQuestionOptions,e=this.question.type,i=[];switch(e){case le["h"].singleChoice:case le["h"].multipleChoice:i=t&&t.possibleAnswers;break;case le["h"].matching:case le["h"].rankOrder:i=t&&t.prompts;break;case le["h"].ratingScale:i=JSON.parse(JSON.stringify(t&&t.possibleAnswers)),i.reverse();break}return i},matchingOrRankOrder:function(){var t=this.question.type;return t===le["h"].matching||t===le["h"].rankOrder},matchingOrRankOrderAnswer:function(){var t=this.question.pollingQuestionOptions;return t&&t.possibleAnswers},isMatching:function(){var t=this.question.type;return t===le["h"].matching},isRatingScale:function(){var t=this.question.type;return t===le["h"].ratingScale},correctAnswer:function(){var t=this.rightAnswers||[],e=[];return t.forEach((function(t){e.push(t.value)})),e.join(", ")}},methods:{getCircleStyle:function(t){var e=le["a"][t];return{color:e,borderColor:e}},rightItem:function(t,e){var i=this.isMatching?le["d"][e]:this.$t("row",{index:e+1});return i+": "+t.value}}},fe=pe,me=(i("487e"),Object(x["a"])(fe,Qt,Yt,!1,null,"31f62396",null)),ge=me.exports,ve={name:"poll-dialog",components:{PollQuestionItem:ge},data:function(){return{visible:!1,poll:null}},computed:{advance:function(){return!!this.poll.recordingSupportAdvance}},methods:{show:function(t){this.poll!==t&&(this.poll=t),this.visible=!0},hide:function(){this.visible=!1}}},ye=ve,be=Object(x["a"])(ye,Xt,Zt,!1,null,null,null),we=be.exports,Ce=window.Vue,xe=u["default"].getPlugin("plugin"),Pe=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;Object(r["a"])(this,i),s=e.call(this,t,n);var a=d["a"].getters.hasPoll;return a?(s.sharePlayer=n.sharePlayer,s.getAndCreateMarker(t),s):Object(l["a"])(s)}return Object(o["a"])(i,[{key:"getAndCreateMarker",value:function(t){var e=d["a"].state.polls;this.createMarker(e,t),this.createPollingControlComp(e,t)}},{key:"createMarker",value:function(t,e){var i=this.sharePlayer;Object(O["a"])().then((function(n){var s=new Ce({i18n:n,store:d["a"],render:function(n){return n(Me,{props:{player:e,sharePlayer:i,polls:t}})}});s.$mount(),e.controlBar.progressControl.contentEl().appendChild(s.$el)}))}},{key:"createPollingControlComp",value:function(t,e){var i=this,n=this.sharePlayer;Object(O["a"])().then((function(s){var a=new Ce({store:d["a"],i18n:s,render:function(i){return i(ke,{props:{player:e,sharePlayer:n,polls:t}})}});a.$mount(),e.speed().insertAfter(a.$el),i.comp=a}))}},{key:"insertAfter",value:function(t){var e=this.comp.$el,i=e.parentNode;i.lastChild===e?i.appendChild(t):i.insertBefore(t,e.nextSibling)}}]),i}(xe);u["default"].registerPlugin("pollResult",Pe);var Me={mixins:[j["a"]],components:{VjsPollingMarker:Gt,pollDialog:we},props:{polls:{type:Array,default:function(){return[]}}},data:function(){return{currentTime:0}},computed:Object(a["a"])({duration:function(){return this.player.duration()},filterPolls:function(){var t=this;return this.polls.filter((function(e){var i=e.shareTimeInRecording-t.offsetStart;return!(i<=0||i>t.duration)}))}},Object(p["e"])(["offsetStart","pollShow","editR"])),render:function(){var t=arguments[0];return t("div",{directives:[{name:"show",value:this.pollShow}],class:"vjs-polling-markers-bar"},[this.renderMakers(),t("div",[t("poll-dialog",{ref:"pollDialog"})])])},mounted:function(){var t=this;this.player.on("timeupdate",(function(){var e=parseInt(t.player.currentTime());t.currentTime!==e&&(t.currentTime=e)}))},methods:{renderMakers:function(){var t=this,e=this.$createElement;return this.filterPolls.map((function(i,n){return e("vjs-polling-marker",{attrs:{poll:i,player:t.player,"active-player":t.activePlayer},key:i.shareTimeInRecording+"/"+n,on:{manual:t.handleManual}})}))},handleManual:function(t){var e=this.player;!e.paused()&&e.pause(),this.showPollDialog(t)},showPollDialog:function(t){this.$refs.pollDialog.show(t)}},watch:{currentTime:function(t){var e=this;if(this.pollShow&&!this.player.paused()&&!this.editR){var i=this.filterPolls.find((function(i){return t+e.offsetStart===i.shareTimeInRecording}));i&&this.showPollDialog(i)}}}},ke={mixins:[j["a"],D["a"],f["a"]],props:{polls:{type:Array,default:function(){return[]}}},computed:Object(a["a"])({wrapperCls:function(){var t=["vjs-polling-control"];return this.pollShow?t.push("hide-poll"):t.push("show-poll"),t.join(" ")},controlText:function(){return this.pollShow?"Hide Poll Result":"Show Poll Result"},duration:function(){return this.player.duration()},pollShowBtn:function(){var t=this;return this.polls.filter((function(e){var i=e.shareTimeInRecording-t.offsetStart;return!(i<=0||i>t.duration)})).length}},Object(p["e"])(["offsetStart","pollShow"])),render:function(){var t=arguments[0];return t("div",{directives:[{name:"show",value:this.pollShowBtn}],class:this.wrapperCls},[t("button",{class:"vjs-polling-control-button vjs-control",attrs:{"aria-label":this.controlText},on:{click:this.onControlClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave}},[t("span",{attrs:{"arial-hidden":"true"},class:"vjs-icon-placeholder"})]),t("vjs-pop-title",{attrs:{placement:this.placement,offset:this.offset,modifiers:this.modifiers,"append-to-body":!1,title:this.getTitle()},ref:"popTitle"})])},methods:Object(a["a"])({onControlClick:function(){this.pollShow?this.setPollShow(!1):this.setPollShow(!0)},getTitle:function(){return this.pollShow?this.$t("hide_poll"):this.$t("show_poll")}},Object(p["d"])({setPollShow:"SET_POLL_SHOW"}))},Te={name:"vjs-highlight-bar",props:{highlight:Object,player:Object},data:function(){return{offset:"0, 11px"}},computed:Object(a["a"])({duration:function(){return this.player.duration()}},Object(p["e"])(["offsetStart","realCurrT"])),render:function(){var t=arguments[0];return t("div",{class:"vjs-highlight-bar",style:this.getMarkerStyl(this.highlight)},[t("div",{class:"vjs-highlight-progress",style:this.getProgressStyl(this.highlight)})])},methods:{getMarkerStyl:function(t){var e=t.startTimeMs,i=t.endTimeMs,n=1e3*this.duration,s=1e3*this.offsetStart,a=parseInt((e-s)/n*1e4)/100,r=parseInt((i-e)/n*1e4)/100;return{width:r+"%",left:a+"%"}},getProgressStyl:function(t){var e=t.startTimeMs,i=t.endTimeMs,n=1e3*this.realCurrT,s=0;if(n>=i)s=100;else if(n<=e)s=0;else{var a=i-e;s=parseInt((n-e)/a*1e4)/100}return{width:s+"%"}}}},Se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.wrapperCls},[t.hasHighlight?[i("div",{staticClass:"left"},[i("label",{attrs:{id:"play_highlights_label"}},[t._v(t._s(t.$t("play_highlights_new")))]),i("zm-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.highlightTips)},slot:"content"}),i("i",{staticClass:"zm-icon-info-outline mgl-xs mgr-sm",attrs:{role:"button","aria-label":"Learn More about Recording Highlights"}})]),i("zm-switch",{attrs:{disabled:t.edit,"label-by":"play_highlights_label","label-text":"Only play highlights is "+(t.mode?"Turned On":"Turned Off")},on:{change:t.changePlayMode},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1),t.allowEdit?i("div",{staticClass:"right"},[t.isIpad?t._e():i("edit-highlights",{attrs:{player:t.player,edit:t.edit,trimming:t.trimming},on:{"show-setting":t.showHighlightsSettingComp}}),i("save-highlight-as",{attrs:{edit:t.edit,trimming:t.trimming}})],1):t._e()]:t.allowEdit&&!t.isIpad?[t.hasTranscript?i("div",{staticClass:"desc"},[i("span",[t._v(t._s(t.$t("no_highlights_desc1")))]),i("span",{staticClass:"mgl-xs"},[t._v(t._s(t.$t("add_highlights")))]),t.trimming?i("zm-tooltip",{attrs:{placement:"top",content:t.unableTrimTips}},[i("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("no_highlights_here"))+" ")])]):i("button",{attrs:{type:"button"},on:{click:t.showHighlightsSettingComp}},[t._v(t._s(t.$t("no_highlights_here")))]),t._v(" "+t._s(t.$t("no_highlights_or"))+" "),i("span",{domProps:{innerHTML:t._s(t.highlightsDesc2)}})],1):i("div",{staticClass:"desc"},[t._v(t._s(t.$t("no_highlights_desc1")))]),i("zm-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.highlightTips)},slot:"content"}),i("i",{staticClass:"zm-icon-info-outline mgl-xs mgr-sm",attrs:{role:"button","aria-label":"Learn More about Recording Highlights"}})]),t.hasTranscript?t._e():[t.trimming?i("zm-tooltip",{attrs:{placement:"top",content:t.unableTrimTips}},[i("button",{attrs:{type:"button"}},[t._v(t._s(t.$t("add_highlights")))])]):i("button",{attrs:{type:"button"},on:{click:t.showHighlightsSettingComp}},[t._v(t._s(t.$t("add_highlights")))])]]:t._e()],2)},_e=[],je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"save-highlights-as"},[i("i",{staticClass:"icon"}),t.trimming?i("zm-tooltip",{attrs:{placement:"top",content:t.unableTrimTips}},[i("button",{staticClass:"btn",attrs:{type:"button"}},[t._v(" "+t._s(t.$t("save_as_new_clip"))+" ")])]):[i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.showDialog}},[t._v(" "+t._s(t.$t("save_as_new_clip"))+" ")])],i("zm-dialog",{staticClass:"highlights-dialog",attrs:{visible:t.visible,title:t.dialogTitle,width:"500px","append-to-body":"","aria-describedby":"highlights-desc"},on:{"update:visible":function(e){t.visible=e},open:t.dialogOpen}},[i("div",{attrs:{id:"highlights-desc"}},[t.showSuccessTips?i("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.highlightsDesc2)}}):[i("div",{staticClass:"desc"},[t._v(t._s(t.$t("highlights_d_desc")))]),i("div",{attrs:{id:"name-clip"}},[t._v(t._s(t.$t("name_clip")))]),i("zm-input",{attrs:{"label-by":"name-clip",name:"clipName",maxlength:200},model:{value:t.clipName,callback:function(e){t.clipName=e},expression:"clipName"}})]],2),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.showSuccessTips?i("zm-button",{attrs:{plain:""},on:{click:t.closeDialog}},[t._v(" "+t._s(t.$t("btn_ok"))+" ")]):[i("zm-button",{attrs:{type:"primary",loading:t.saveLoading,disabled:!t.clipName.trim()},on:{click:t.saveHighlightsAs}},[t._v(" "+t._s(t.$t("save_now"))+" ")]),i("zm-button",{attrs:{plain:""},on:{click:t.closeDialog}},[t._v(" "+t._s(t.$t("cancel"))+" ")])]],2)])],2)},Oe=[],$e=i("365c"),Ie={name:"save-highlights-as",props:{edit:Boolean,trimming:Boolean},data:function(){return{visible:!1,dialogTitle:"",saveLoading:!1,clipName:"",showSuccessTips:!1}},computed:Object(a["a"])(Object(a["a"])({highlightsDesc2:function(){var t=this.isRecordingHostSelf?"/recording/detail?meeting_id=".concat(this.meetingId):"/recording/management/detail?meeting_id=".concat(this.meetingId);return this.$t("highlights_d_desc2",[t])},unableTrimTips:function(){return this.$t("trimming_unable_edit")}},Object(p["e"])(["topic","isRecordingHostSelf","meetingId","shareVideoId","recordingId","tranLocalJsonFileId"])),Object(p["c"])(["computedHighlights","videoId"])),methods:{saveHighlightsAs:function(){var t=this;this.saveLoading=!0;var e=this.clipName,i=this.computedHighlights,n=[];i.forEach((function(t){var e={startTime:t.startStr,endTime:t.endStr};n.push(e)})),Object($e["h"])({clipName:e,recordId:this.videoId,tranLocalJsonFileId:this.tranLocalJsonFileId,tranWebVttFileId:this.tranWebVttFileId,ranges:JSON.stringify(n)}).then((function(){t.saveLoading=!1,t.dialogTitle=t.$t("highlights_d_title2"),t.showSuccessTips=!0})).catch((function(e){t.saveLoading=!1,t.$message.error(e.message)})),Object($e["i"])({html_object_id:"recordingExportHighlights",html_object_category:"Recording",html_class:""}).catch((function(){}))},showDialog:function(){this.edit||(this.visible=!0)},closeDialog:function(){this.visible=!1},dialogOpen:function(){this.saveLoading=!1,this.dialogTitle=this.$t("highlights_d_title"),this.clipName="".concat(this.topic," highlights"),this.checked=!0,this.showSuccessTips=!1}}},Ee=Ie,Le=(i("c5d7"),Object(x["a"])(Ee,je,Oe,!1,null,"59c9809f",null)),Ae=Le.exports,De=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-highlights"},[i("i",{staticClass:"zm-icon-edit"}),t.trimming?i("zm-tooltip",{attrs:{placement:"top",content:t.unableTrimTips}},[i("button",{staticClass:"btn",attrs:{type:"button"}},[t._v(" "+t._s(t.$t("edit_highlights"))+" ")])]):i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.showHighlightsSettingComp}},[t._v(" "+t._s(t.$t("edit_highlights"))+" ")])],1)},He=[],Be={name:"edit-highlights",props:{player:Object,edit:Boolean,trimming:Boolean},methods:{showHighlightsSettingComp:function(){this.edit||this.$emit("show-setting")}},computed:{unableTrimTips:function(){return this.$t("trimming_unable_edit")}}},Re=Be,We=(i("d49a"),Object(x["a"])(Re,De,He,!1,null,"91ed9d24",null)),Ve=We.exports,ze=i("0a1f"),Ne=i("5b8d"),Fe={name:"highlights-control-bar",props:{player:Object},data:function(){return{mode:!1,highlightTips:this.$t("highlight_help"),highlightsDesc2:this.$t("no_highlights_desc2")}},components:{SaveHighlightAs:Ae,EditHighlights:Ve},computed:Object(a["a"])(Object(a["a"])({isIpad:function(){return ze["c"]},hasHighlight:function(){var t=this.highlights;return t&&t.length},allowEdit:function(){return this.hasPermissionEdit},edit:function(){return this.editHL||this.editR},wrapperCls:function(){var t=[],e=this.hasHighlight?"highlights-control-wrapper":this.allowEdit&&!this.isIpad?"highlights-notice-wrapper":"highlights-wrapper";return t.push(e),this.edit&&t.push("disabled"),this.trimming&&t.push("trimming"),t},unableTrimTips:function(){return this.$t("trimming_unable_edit")}},Object(p["e"])(["highlightsMode","hasPermissionEdit","editHL","trimming","editR"])),Object(p["c"])({highlights:"computedHighlights",hasTranscript:"hasTranscript"})),methods:Object(a["a"])({changePlayMode:function(){this.mode?(this.setHighlightsMode(!0),this.playHighlights()):this.setHighlightsMode(!1)},playHighlights:function(){var t=this.player,e=this.highlights[0].startTime;t.pause(),t.realCurrentTime(e),Object($e["i"])({html_object_id:"recordingPlayerHighlightMode",html_object_category:"Recording",html_class:""}).catch((function(){}))},showHighlightsSettingComp:function(){if(!this.edit){var t=this.player,e=t.highlights().highlightsSettingComp;e.show(),e.setEditHLStatus(!0),window.addEventListener("keydown",i),this.$nextTick((function(){var n=new Ne["a"](e.$el,document.activeElement);e.$once("hide",(function(){window.removeEventListener("keydown",i),n.closeDialog()})),t.pause(),t.controlBar.hide()}))}function i(t){var i=t.keyCode,n=T["a"].keys;i===n.esc&&(e.hide(),t.preventDefault())}}},Object(p["d"])({setHighlightsMode:"SET_HIGHLIGHTS_MODE"})),mounted:function(){this.mode=this.highlightsMode}},Ue=Fe,qe=(i("b373"),Object(x["a"])(Ue,Se,_e,!1,null,"0dfc8626",null)),Ke=qe.exports,Je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vjs-highlights-setting-mask"},[i("div",{staticClass:"vjs-highlights-setting"},[i("div",{staticClass:"header"},[i("button",{class:t.btnCls,attrs:{"aria-label":t.controlText},on:{click:t.togglePlay}},[i("span",{staticClass:"vjs-icon-placeholder",attrs:{"arial-hidden":"true"}})])]),i("div",{ref:"content",staticClass:"center",class:{"show-tips":t.showAddTips},attrs:{tabindex:"0","aria-label":t.ariaLabel},on:{mousemove:function(e){t.onMouseMove(e)},mouseleave:t.onMouseLeave,click:t.onClick,keydown:t.onKeyDown}},[t.showAddTips?i("div",{staticClass:"add-tips"},[t._v(" "+t._s(t.$t("no_highlights_tips"))+" ")]):[t.showAddBox?i("div",{directives:[{name:"focus",rawName:"v-focus"}],ref:"add",staticClass:"add-box",style:t.addBoxStyl,attrs:{role:"slider",tabindex:t.tabIndex,"aria-label":"Add New Highlight","aria-describedby":"addAriaDes","aria-orientation":"horizontal","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.addVal,"aria-valuetext":t.addTime},on:{keydown:t.onAddKeyDown}},[i("div",{staticClass:"vjs-tooltip",attrs:{role:"tooltip","aria-label":t.addTip}},[i("span",{staticClass:"title"},[t._v(" "+t._s(t.addTip)+" ")])])]):t._e(),t._l(t.computedHL,(function(e,n){return i("highlight-segment",{key:e.startTimeMs+"/"+n,ref:"seg",refInFor:!0,attrs:{highlight:e,player:t.player,index:n,"tab-index":t.tabIndex},on:{"on-move":t.updateAddBoxStatus,"update-tab-status":t.updateTabStatus}})})),i("div",{staticClass:"sr-only",attrs:{id:"addAriaDes"}},[t._v(t._s(t.addAriaDes))]),i("div",{staticClass:"sr-only",attrs:{id:"startAriaDes"}},[t._v(t._s(t.startAriaDes))]),i("div",{staticClass:"sr-only",attrs:{id:"endAriaDes"}},[t._v(t._s(t.endAriaDes))])]],2),i("div",{staticClass:"footer vjs-highlights-actions"},[i("zm-button",{attrs:{type:"primary",size:"small",loading:t.saving},on:{click:t.save}},[t._v(" "+t._s(t.$t("done"))+" ")]),i("zm-button",{staticClass:"mgl-xs",attrs:{size:"small"},on:{click:t.cancel}},[t._v(" "+t._s(t.$t("cancel"))+" ")])],1)])])},Ge=[],Xe=(i("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"segment",staticClass:"highlight-segment",class:{"is-active":t.isActive,"is-drag":t.isDrag,"is-start":t.isDragStart,"is-end":t.isDragEnd,"show-curr":t.showCurrT},style:t.getSegmentStyl,attrs:{tabindex:"-1"},on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,click:function(e){t.changeToCurrent(e)},mousemove:function(e){t.handleMouseMove(e)}}},[i("span",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"prev dot",attrs:{role:"slider","aria-label":t.startAriaLabel,"aria-describedby":"startAriaDes","aria-orientation":"horizontal","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.start,"aria-valuetext":t.startTime,tabindex:t.tabIndex},on:{mousedown:function(e){t.onMouseDown(e,!0)},keydown:t.onStartKeyDown,focus:t.onStartFocus}}),i("span",{staticClass:"next dot",attrs:{role:"slider","aria-label":t.endAriaLabel,"aria-describedby":"endAriaDes","aria-orientation":"horizontal","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.end,"aria-valuetext":t.endTime,tabindex:t.tabIndex},on:{mousedown:function(e){t.onMouseDown(e,!1)},keydown:t.onEndKeyDown,focus:t.onEndFocus}}),i("div",{staticClass:"remove"},[i("ul",[i("li",{staticClass:"item",attrs:{role:"button",tabindex:t.tabIndex,"aria-label":t.removeAriaLabel},on:{click:function(e){t.handleRemove(e)},keydown:t.onRemoveKeyDown}},[t._v(" "+t._s(t.$t("remove"))+" ")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showGrayLine,expression:"showGrayLine"}],staticClass:"gray-line",style:t.getGrayLineStyl}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRedLine,expression:"showRedLine"}],staticClass:"curr-pos",style:t.getCurrPos}),i("span",{staticClass:"start tooltip"},[t._v(t._s(t.startTime))]),i("span",{staticClass:"end tooltip"},[t._v(t._s(t.endTime))]),i("span",{staticClass:"current-time tooltip",style:t.currStyl},[t._v(t._s(t.currTime))])])}),Ze=[],Qe={name:"highlight-segment",props:{player:Object,highlight:Object,index:Number,tabIndex:Number},data:function(){return{grayLinePos:0,mouseover:!1,currTime:"00:00:00",showCurrT:!1,currStyl:{}}},directives:{focus:{inserted:function(t,e,i){var n=i.context,s=n.$store.state;n.isActive&&!s.isDrag&&s.isDragStart&&Object(mt["b"])(t,"prev")&&t.focus()}}},computed:Object(a["a"])(Object(a["a"])({oIndex:function(){return this.highlight.index},isActive:function(){return this.activeIndex===this.oIndex},duration:function(){return this.player.duration()},showRedLine:function(){var t=this.highlight,e=t.startTimeMs,i=t.endTimeMs,n=1e3*this.realCurrT;return n>=e&&n<=i},showGrayLine:function(){return!this.isDrag&&this.mouseover},getSegmentStyl:function(){var t=this.highlight,e=t.startTimeMs,i=t.endTimeMs,n=1e3*this.duration,s=1e3*this.offsetStart,a=parseInt((e-s)/n*1e4)/100,r=parseInt((i-e)/n*1e4)/100;return{width:r+"%",left:a+"%"}},getCurrPos:function(){var t=this.highlight,e=t.startTimeMs,i=t.endTimeMs,n=1e3*this.realCurrT,s=parseInt((n-e)/(i-e)*1e4)/100;return{left:s+"%"}},startTime:function(){var t=this.highlight,e=1e3*this.offsetStart,i=((t.startTimeMs-e)/1e3).toFixed(3);return Object(b["e"])(i)},endTime:function(){var t=this.highlight,e=1e3*this.offsetStart,i=((t.endTimeMs-e)/1e3).toFixed(3);return Object(b["e"])(i)},getGrayLineStyl:function(){return{left:this.grayLinePos+"px"}},removeAriaLabel:function(){var t=this.index+1;return"Remove highlight ".concat(t)},startAriaLabel:function(){var t=this.index+1;return"Highlight ".concat(t," start")},endAriaLabel:function(){var t=this.index+1;return"Highlight ".concat(t," end")},max:function(){var t=this.duration;return parseInt(t)},start:function(){var t=this.highlight.startTime,e=this.offsetStart;return parseInt(t-e)},end:function(){var t=this.highlight.endTime,e=this.offsetStart;return parseInt(t-e)}},Object(p["e"])(["offsetStart","highlights","realCurrT","isDrag","isDragStart","isDragEnd","activeIndex"])),Object(p["c"])({computedHL:"computedHighlights"})),methods:Object(a["a"])({onMouseEnter:function(){this.isDrag||(this.updateActiveIndex(this.oIndex),this.mouseover=!0)},onMouseLeave:function(){this.mouseover=!1},changeToCurrent:function(t){if(this.mouseover){var e=this.player,i=this.$parent.$refs.content.clientWidth,n=1e3*this.duration,s=1e3*this.offsetStart,a=this.highlight,r=n/i,o=a.startTimeMs,l=this.grayLinePos*r,h=((l+o-s)/1e3).toFixed(3);this.currTimeout&&window.clearTimeout(this.currTimeout),e.currentTime(h),this.currTime=Object(b["e"])(h),this.currStyl={left:this.grayLinePos+"px"},this.showCurrT=!0;var c=this;this.currTimeout=window.setTimeout(u,2e3),t.stopPropagation(),t.preventDefault()}function u(){c.showCurrT=!1}},handleMouseMove:function(t){if(!this.isDrag){this.$emit("on-move",!1);var e=t.clientX,i=this.$refs.segment,n=i.getBoundingClientRect(),s=n.left;this.grayLinePos=e-s,this.mouseover||(this.mouseover=!0),t.stopPropagation(),t.preventDefault()}},onMouseDown:function(t,e){var i=this,n=this.highlights,s=this.computedHL,a=s.length,r=t.clientX,o=this.$parent.$refs.content.clientWidth,l=this.highlight,h=1e3*this.duration,c=1e3*this.offsetStart,u=c+h,d=h/o,p=this.oIndex,f=1e3,m=l.startTimeMs,g=l.endTimeMs,v=this.index,y=a-1,w=n[p-1],C=n[p+1],x={};this.mouseover=!1,this.showCurrT=!1,this.setDragStatus(!0),e?this.setDragStart(!0):this.setDragEnd(!0);var P=this;function M(){e?P.setDragStart(!1):P.setDragEnd(!1)}this.timeout&&window.clearTimeout(this.timeout),this.onMouseMove=function(t){var a=t.clientX-r,o=a*d;if(e){var l,h=m+o;if(o<0)if(0===v)l=(Math.max(h,c)/1e3).toFixed(3);else{var w=s[v-1].endTimeMs;l=(Math.max(h,w)/1e3).toFixed(3)}else{var C=g-f;l=(Math.min(h,C)/1e3).toFixed(3)}var P=Object(b["e"])(l)+"."+l.split(".")[1];n[p].startTime!==P&&(x={startTime:P,endTime:n[p].endTime},i.updateHLByIndex({oIndex:p,item:x}))}else{var M,k=g+o;if(o>0)if(v===y)M=(Math.min(k,u)/1e3).toFixed(3);else{var T=s[v+1].startTimeMs;M=(Math.min(k,T)/1e3).toFixed(3)}else{var S=m+f;M=(Math.max(k,S)/1e3).toFixed(3)}var _=Object(b["e"])(M)+"."+M.split(".")[1];n[p].endTime!==_&&(x={startTime:n[p].startTime,endTime:_},i.updateHLByIndex({oIndex:p,item:x}))}t.stopPropagation(),t.preventDefault()},this.onMouseUp=function(){i.setDragStatus(!1);var t=n[p],s=t&&t.startTime,a=t&&t.endTime;if(e&&w&&w.endTime===s){x={startTime:w.startTime,endTime:a};var r=p-1;i.updateHLByIndex({oIndex:r,count:2,item:x}),i.updateActiveIndex(r)}else!e&&C&&C.startTime===a&&(x={startTime:s,endTime:C.endTime},i.updateHLByIndex({oIndex:p,count:2,item:x}));i.timeout=window.setTimeout(M,1e3),document.removeEventListener("mousemove",i.onMouseMove),document.removeEventListener("mouseup",i.onMouseUp)},document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),t.stopPropagation(),t.preventDefault()},handleRemove:function(t){var e=this.oIndex;this.updateHLByIndex({oIndex:e}),t.stopPropagation(),t.preventDefault()},onStartFocus:function(){this.isActive||this.updateActiveIndex(this.oIndex),this.isDragEnd&&this.setDragEnd(!1)},onEndFocus:function(){this.isActive||this.updateActiveIndex(this.oIndex),this.isDragStart&&this.setDragStart(!1)},keyDownStart:function(t){var e,i,n=1e3,s=this.highlights,a=this.computedHL,r=this.highlight,o=r.startTimeMs,l=r.endTimeMs,h=this.index,c=this.oIndex,u=1e3*this.offsetStart,d=o+t*n,p=!1;if(t<0)if(0===h)e=(Math.max(d,u)/1e3).toFixed(3);else{i=a[h-1];var f=i.endTimeMs;f===o?p=!0:e=(Math.max(d,f)/1e3).toFixed(3)}else{var m=l-n;e=(Math.min(d,m)/1e3).toFixed(3)}if(p){var g=r.endStr,v={startTime:i.startStr,endTime:g},y=c-1;this.updateHLByIndex({oIndex:y,count:2,item:v}),this.updateActiveIndex(y),Object(S["b"])("Highlight ".concat(h+1," Merged Highlight ").concat(h)),this.$parent.$refs.seg[h-1].$el.focus()}else{var w=Object(b["e"])(e)+"."+e.split(".")[1];if(s[c].startTime!==w){var C={startTime:w,endTime:s[c].endTime};this.updateHLByIndex({oIndex:c,item:C})}}},handleStart:function(t){!this.isDragStart&&this.setDragStart(!0),t.stopPropagation(),t.preventDefault()},onStartKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;switch(e){case i.left:this.keyDownStart(-1),this.handleStart(t);break;case i.right:this.keyDownStart(1),this.handleStart(t);break;case i.esc:this.$emit("update-tab-status"),t.stopPropagation(),t.preventDefault();break}},keyDownEnd:function(t){var e,i,n=1e3,s=this.highlights,a=this.computedHL,r=a.length,o=this.highlight,l=o.startTimeMs,h=o.endTimeMs,c=this.oIndex,u=1e3*this.duration,d=1e3*this.offsetStart,p=d+u,f=h+t*n,m=this.index,g=r-1,v=!1;if(t>0)if(m===g)e=(Math.min(f,p)/1e3).toFixed(3);else{i=a[m+1];var y=i.startTimeMs;h===y?v=!0:e=(Math.min(f,y)/1e3).toFixed(3)}else{var w=l+n;e=(Math.max(f,w)/1e3).toFixed(3)}if(v){var C=o.startStr,x={startTime:C,endTime:i.endStr};this.updateHLByIndex({oIndex:c,count:2,item:x}),Object(S["b"])("Highlight ".concat(m+1," Merged Highlight ").concat(m+2)),this.$refs.segment.focus()}else{var P=Object(b["e"])(e)+"."+e.split(".")[1];if(s[c].endTime!==P){var M={startTime:s[c].startTime,endTime:P};this.updateHLByIndex({oIndex:c,item:M})}}},handleEnd:function(t){!this.isDragEnd&&this.setDragEnd(!0),t.stopPropagation(),t.preventDefault()},onEndKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;switch(e){case i.left:this.keyDownEnd(-1),this.handleEnd(t);break;case i.right:this.keyDownEnd(1),this.handleEnd(t);break;case i.esc:this.$emit("update-tab-status"),t.stopPropagation(),t.preventDefault();break}},onRemoveKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;switch(e){case i.enter:case i.space:var n=this.oIndex,s=this.index+1;this.updateHLByIndex({oIndex:n}),Object(S["b"])("Highlight ".concat(s," removed")),this.$parent.$refs.content.focus(),t.stopPropagation(),t.preventDefault();break;case i.esc:this.$emit("update-tab-status"),t.stopPropagation(),t.preventDefault();break}}},Object(p["d"])({updateHLByIndex:"UPDATE_HL_BY_INDEX",setDragStatus:"SET_DRAG_STATUS",setDragStart:"SET_DRAG_START",setDragEnd:"SET_DRAG_END",updateActiveIndex:"UPDATE_ACTIVE_INDEX"})),watch:{activeIndex:function(t){this.isDrag||(this.setDragStart(!1),this.setDragEnd(!1),this.showCurrT=!1)}}},Ye=Qe,ti=(i("a71c"),Object(x["a"])(Ye,Xe,Ze,!1,null,"a970284c",null)),ei=ti.exports,ii={name:"highlights-setting",props:{player:Object},data:function(){return{isPlaying:!1,saving:!1,leftPos:0,addVal:0,showAddBox:!1,addTip:this.$t("add_highlight"),tabIndex:-1}},components:{HighlightSegment:ei},directives:{focus:{inserted:function(t,e,i){var n=i.context;0===n.tabIndex&&t.focus()}}},mounted:function(){var t=this,e=this.player;e.on(["play","pause"],(function(){t.isPlaying=!e.paused()}))},computed:Object(a["a"])(Object(a["a"])({showAddTips:function(){return 0===this.computedHL.length&&!this.showAddBox},addBoxStyl:function(){return{left:this.leftPos+"px"}},btnCls:function(){var t=["vjs-play-button"];return t.push(this.isPlaying?"vjs-playing":"vjs-paused"),t.join(" ")},controlText:function(){return this.isPlaying?"Pause":"Play"},duration:function(){return this.player.duration()},ariaLabel:function(){return"highlight timeline slider, press space to begin editing highlights, press escape when done"},addAriaDes:function(){return"press arrow keys to navigate, press space to add highlight"},startAriaDes:function(){return"press arrow left/right to edit start time"},endAriaDes:function(){return"press arrow left/right to edit end time"},max:function(){var t=this.duration;return parseInt(t)},addTime:function(){var t=this.addVal;return Object(b["e"])(t)},unit:function(){var t=1e3*this.duration,e=this.$refs.content,i=e.clientWidth;return i/t}},Object(p["e"])(["offsetStart","highlights","tranLocalJsonFileId","recordMeetId","fileStartTime","transcriptList","isDrag"])),Object(p["c"])({videoId:"videoId",HLItemList:"HLItemList",computedHL:"computedHighlights"})),methods:Object(a["a"])({togglePlay:function(){var t=this.player,e=this.isPlaying;e?t.pause():t.play()},onMouseMove:function(t){if(!this.isDrag){var e=t.clientX,i=this.$refs.content,n=i.getBoundingClientRect(),s=n.left,a=i.clientWidth-7,r=e-s-3;r<0?r=0:r>a&&(r=a),this.leftPos=r,this.updateAddBoxStatus(!0)}},onMouseLeave:function(){this.updateAddBoxStatus(!1)},handleRightKeyDown:function(){var t=this.unit,e=this.max;this.checkSegments(this.addVal,!0),this.addVal=this.addVal<e?this.addVal:e,this.leftPos=Math.round(1e3*this.addVal*t)},onKeyDown:function(t){var e=t.keyCode,i=T["a"].keys;switch(e){case i.space:this.tabIndex=0,this.updateAddBoxStatus(!0),this.addVal=0,this.handleRightKeyDown(),t.stopPropagation();break;case i.esc:this.tabIndex=-1,t.stopPropagation();break}},onAddKeyDown:function(t){var e=t.keyCode,i=T["a"].keys,n=this.unit,s=1/this.unit,a=Math.round(7*s)/1e3,r=this.max-a;switch(e){case i.space:this.onClick(),this.$refs.content.focus(),t.stopPropagation();break;case i.left:this.addVal>0&&(this.addVal--,this.checkSegments(this.addVal,!1),this.addVal=this.addVal>0?this.addVal:0,this.leftPos=Math.round(1e3*this.addVal*n)),t.stopPropagation();break;case i.right:this.addVal<r-1&&(this.addVal++,this.handleRightKeyDown()),t.stopPropagation();break;case i.esc:this.updateTabStatus(),t.stopPropagation();break}},onClick:function(){if(this.showAddBox){var t=this.highlights,e=this.computedHL,i=this.HLItemList,n=t.length,s=e.length,a=1e3*this.offsetStart,r=1e3*this.duration,o=this.$refs.content,l=o.clientWidth,h=r/l,c=l-7,u=7*h,d=this.leftPos;d<0?d=0:d>c&&(d=c);var p=(d+7)*h+a,f=p-u,m=(f/1e3).toFixed(3),g=(p/1e3).toFixed(3),v={},y=1,w=!1;if(v.startTime=Object(b["e"])(m)+"."+m.split(".")[1],v.endTime=Object(b["e"])(g)+"."+g.split(".")[1],0===s)if(0===n)this.updateHLByIndex({oIndex:0,count:0,item:v});else for(var C=i[0],x=0;x<n;x++){var P=i[x],M=i[x+1];if(f>P.endTimeMs&&(M&&p<M.startTimeMs||!M)){this.updateHLByIndex({oIndex:x+1,count:0,item:v});break}if(p<C.startTimeMs){this.updateHLByIndex({oIndex:0,count:0,item:v});break}}else for(var k=e[0],T=0;T<s;T++){var S=e[T],_=e[T+1];if(f>S.endTimeMs&&(_&&p<_.startTimeMs||!_)){this.updateHLByIndex({oIndex:S.index+1,count:0,item:v}),y=T+2;break}if(p<k.startTimeMs){this.updateHLByIndex({oIndex:0,count:0,item:v});break}if(f>S.startTimeMs&&f<=S.endTimeMs&&(_&&p<_.startTimeMs||!_)){v.startTime=S.startStr,this.updateHLByIndex({oIndex:S.index,count:1,item:v}),y=T+1,w=!0;break}if(f<S.startTimeMs&&p<=S.endTimeMs&&p>S.startTimeMs){v.endTime=S.endStr,this.updateHLByIndex({oIndex:S.index,count:1,item:v}),y=T+1,w=!0;break}if(f>=S.startTimeMs&&f<=S.endTimeMs&&_&&p>=_.startTimeMs&&p<=_.endTimeMs){v.startTime=S.startStr,v.endTime=_.endStr,this.updateHLByIndex({oIndex:S.index,count:2,item:v}),y=T+1,w=!0;break}}this.updateAddBoxStatus(!1),this.addVal=0,this.handleRightKeyDown(),this.readAddAria(y,w)}},readAddAria:function(t,e){e?Object(S["b"])("Highlight ".concat(t," updated")):Object(S["b"])("Highlight ".concat(t," added"))},updateTabStatus:function(){this.tabIndex=-1,this.$refs.content.focus(),this.updateAddBoxStatus(!1)},updateAddBoxStatus:function(t){this.showAddBox!==t&&(this.showAddBox=t)},updateOriginalHL:function(){var t=this.player,e=t.highlights().highlightsSettingComp,i=JSON.parse(JSON.stringify(this.highlights));e.updateOriginalHL(i)},save:function(){var t=this;this.saving=!0;var e=this.HLItemList,i=[],n=[],s=[];this.highlights.forEach((function(t,n){var a={startTime:t.startTime,endTime:t.endTime};i.push(a),s=s.concat(e[n].itemIds)})),this.transcriptList.forEach((function(t){for(var e=!1,i=t.itemId,a=0;a<s.length;a++)if(i===s[a]){e=!0;break}n.push({item_id:i,highlighted:e})}));var a={tranLocalJsonFileId:this.tranLocalJsonFileId,fileId:this.videoId,meetingId:this.recordMeetId,fileStartTime:this.fileStartTime,ranges:JSON.stringify(i),items:JSON.stringify(n)};Object($e["m"])(a).then((function(){t.saving=!1,t.updateOriginalHL(),t.updateHLByItemIds(s),t.$emit("hide")})).catch((function(e){t.saving=!1,t.$message.error(e.message)})),this.tabIndex=-1},cancel:function(){this.tabIndex=-1,this.$emit("hide")},checkSegments:function(t,e){var i=this.computedHL,n=i.length,s=1/this.unit,a=this.offsetStart,r=Math.round(7*s)/1e3;if(n>0)for(var o=0;o<n;o++){var l=i[o],h=l.startTime,c=l.endTime;t+a>=h&&t+r+a<=c&&(e?parseInt(c-a)===this.max?this.addVal=h-a-r:this.addVal=c-a:this.addVal=h-a-r)}}},Object(p["d"])({updateHLByItemIds:"UPDATE_HL_BY_ITEM_IDS",updateHLByIndex:"UPDATE_HL_BY_INDEX"}))},ni=ii,si=(i("4f84"),Object(x["a"])(ni,Je,Ge,!1,null,"1e8f82d4",null)),ai=si.exports,ri=window.Vue,oi=u["default"].getPlugin("plugin"),li=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;Object(r["a"])(this,i),s=e.call(this,t,n);var a=!d["a"].getters.computedHighlights.length,o=d["a"].state,h=o.isHighlightFile,c=o.enableHighlight,u=o.canEditHighlight,p=o.hasPermissionEdit,f=o.useFakeTrim,m=o.trimming;return h||!c||!u||!p&&a||!f&&m?Object(l["a"])(s):(s.sharePlayer=n.sharePlayer,s.createHighlightsBar(t),s.createHighlightsControlComp(t),p&&!m&&s.createHighlightsSettingComp(t),s)}return Object(o["a"])(i,[{key:"createHighlightsBar",value:function(t){var e=this.sharePlayer;Object(O["a"])().then((function(i){var n=new ri({i18n:i,store:d["a"],render:function(i){return i(hi,{props:{player:t,sharePlayer:e}})}});n.$mount(),t.controlBar.progressControl.contentEl().appendChild(n.$el)}))}},{key:"createHighlightsControlComp",value:function(t){var e=this,i=this.sharePlayer;Object(O["a"])().then((function(n){var s=new ri({store:d["a"],i18n:n,render:function(e){return e(ci,{props:{player:t,sharePlayer:i}})}});s.$mount(),t.contentEl().appendChild(s.$el),e.highlightsControlComp=s}))}},{key:"createHighlightsSettingComp",value:function(t){var e=this;Object(O["a"])().then((function(i){var n=new ri({store:d["a"],i18n:i,render:function(e){return e(ui,{props:{player:t},on:{hide:this.onSettingHide},ref:"comp"})},computed:Object(a["a"])({},Object(p["e"])(["highlights"])),methods:Object(a["a"])({show:function(){var t=JSON.parse(JSON.stringify(this.highlights));this.updateOriginalHL(t),this.$refs.comp.show()},hide:function(){this.$refs.comp.hide()},onSettingHide:function(){var e=JSON.parse(JSON.stringify(this.originalHL));t.controlBar.show(),this.$emit("hide"),this.updateHighlights(e),this.setEditHLStatus(!1),this.updateActiveIndex(-1)},updateOriginalHL:function(t){this.originalHL=t}},Object(p["d"])({updateHighlights:"UPDATE_HIGHLIGHTS",setEditHLStatus:"SET_EDIT_HL_STATUS",updateActiveIndex:"UPDATE_ACTIVE_INDEX"}))});n.$mount(),t.contentEl().appendChild(n.$el),e.highlightsSettingComp=n}))}}]),i}(oi);u["default"].registerPlugin("highlights",li);var hi={mixins:[j["a"]],components:{VjsHighlightBar:Te},computed:Object(a["a"])({},Object(p["c"])({highlights:"computedHighlights"})),render:function(){var t=arguments[0];return t("div",{class:"vjs-highlights-bar"},[this.renderBars()])},methods:{renderBars:function(){var t=this,e=this.$createElement;return this.highlights.map((function(i,n){return e("vjs-highlight-bar",{attrs:{highlight:i,player:t.player},key:i.startTimeMs+"/"+n})}))}}},ci={mixins:[j["a"]],components:{HighlightsControlBar:Ke},computed:Object(a["a"])(Object(a["a"])({},Object(p["e"])(["highlightsMode","editHL"])),Object(p["c"])({highlights:"computedHighlights"})),mounted:function(){var t=this;this.player.on("timeupdate",(function(){var e=1*t.player.realCurrentTime().toFixed(3);(t.highlightsMode||t.editHL)&&t.highlights.length&&t.checkPlaybackSegments(e),t.setRealCurrT(e)}))},render:function(){var t=arguments[0];return t("highlights-control-bar",{attrs:{player:this.player}})},methods:Object(a["a"])({checkPlaybackSegments:function(t){var e=this.player,i=JSON.parse(JSON.stringify(this.highlights)),n=i.length;if(n>0){var s=i[0].startTime,a=i[n-1].endTime;if(t<s)e.realCurrentTime(s);else if(t>=a)e.realCurrentTime(s),e.pause();else for(var r=0;r<n;r++){var o=i[r],l=i[r+1];if(t>=o.startTime&&t<=o.endTime)return;if(t>o.endTime&&t<l.startTime)return void e.realCurrentTime(l.startTime)}}}},Object(p["d"])({setRealCurrT:"SET_REAL_CURR_T"}))},ui={props:{player:Object},data:function(){return{visible:!1}},components:{HighlightsSetting:ai},render:function(){var t=arguments[0];return t("highlights-setting",{directives:[{name:"show",value:this.visible}],attrs:{player:this.player},on:{hide:this.hide}})},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1,this.$emit("hide")}}},di=(i("3fee"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.visible?[t.isImgLoaded||!t.isVideo?i("div",{ref:"thumbnailContainer",staticClass:"thumbnail-container",style:t.containerStyle},[t.isVideo?i("div",{ref:"imgContainer",staticClass:"thumbnail-image",style:t.previewImageStyle},[i("div",{staticClass:"title time"},[i("div",{staticClass:"text"},[i("span",[t._v(t._s(t.thumbnailLabel.time))])])])]):t._e(),t.thumbnailLabel.name?i("div",{staticClass:"title"},[i("div",{staticClass:"text"},[i("span",[t._v(t._s(t.thumbnailLabel.name))])])]):t._e()]):t._e()]:t._e()],2)}),pi=[],fi={name:"Thumbnail",props:{visible:{type:Boolean,required:!0,default:!1},time:{type:Number,default:-1},name:{type:String,default:""},bottomOffset:{type:Number,default:0},leftOffset:{type:Number,default:0},duration:{type:Number,default:1},progressWidth:{type:Number,default:1}},data:function(){return{previewImageStyle:null,isImgLoaded:!1,containerStyle:null}},computed:Object(a["a"])(Object(a["a"])({},Object(p["e"])(["thumbnail","isVideo"])),{},{thumbnailLabel:function(){return{time:Object(b["d"])(this.time),name:this.name}},thumbnailUrlList:function(){var t;return(null===(t=this.thumbnail)||void 0===t?void 0:t.thumbnail_files)||[]}}),watch:{time:function(){this.visible&&(this.isVideo&&this.updateBgImg(),this.updateThumbStyle())}},mounted:function(){var t=this;this.isVideo&&this.thumbnailUrlList.forEach((function(e){var i=new Image;i.onload=function(){t.isImgLoaded=!0},i.src=e}))},methods:{handleOffset:function(t,e){var i=t,n=this.$refs.thumbnailContainer,s=i?-i.getBoundingClientRect().width/2:0,a=-s/this.progressWidth,r=this.time/this.duration;return r<a?s+(a-r)*this.progressWidth-e:1-r<a?s-(a-1+r)*this.progressWidth-e:n?-n.getBoundingClientRect().width/2:0},updateThumbStyle:function(){var t=this;this.$nextTick((function(){var e=t.$refs.imgContainer,i=t.$refs.nameContainer,n=e?e.getBoundingClientRect().width:0,s=i?null===i||void 0===i?void 0:i.offsetWidth:0,a=n>s?e:i,r=t.$refs.thumbnailContainer,o=((null===r||void 0===r?void 0:r.getBoundingClientRect().width)-Math.max(s,n))/2,l=t.handleOffset(a,o);t.containerStyle={left:"".concat(l,"px"),bottom:"".concat(t.bottomOffset,"px")}}))},updateBgImg:function(){var t=this,e=this.time,i=this.thumbnail,n=i.interval_sec,s=void 0===n?30:n,a=i.tile_length,r=void 0===a?5:a,o=e,l=Math.floor(o/(s*r*r)),h=Math.floor(o%(s*r*r)/s),c=-1!==l?this.thumbnailUrlList[l]:this.thumbnailUrlList[0];if(c){var u=new Image;u.onload=function(){t.isImgLoaded=!0;var e=u.naturalWidth,i=u.naturalHeight,n=e/r,s=i/r,a=e/n,o=Math.floor(h/a)*-s,l=Math.floor(h%a)*-n;t.previewImageStyle={width:"".concat(n,"px"),height:"".concat(s,"px"),backgroundImage:"url(".concat(c,")"),backgroundPosition:"".concat(l,"px ").concat(o,"px")}},u.src=c}}}},mi=fi,gi=(i("7f0d"),Object(x["a"])(mi,di,pi,!1,null,"c9d4cf22",null)),vi=gi.exports,yi=window.Vue,bi=u["default"].getPlugin("plugin"),wi=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,n){var s;Object(r["a"])(this,i),s=e.call(this,t,n);var a=d["a"].getters.hasThumbnail;return a?(s.createComp(t),s):Object(l["a"])(s)}return Object(o["a"])(i,[{key:"createComp",value:function(t){var e=this;Object(O["a"])().then((function(i){var n,s,a,r,o=null===t||void 0===t||null===(n=t["controlBar"])||void 0===n||null===(s=n["progressControl"])||void 0===s||null===(a=s["seekBar"])||void 0===a?void 0:a["mouseTimeDisplay"],l=o["timeTooltip"],h=null===t||void 0===t||null===(r=t["controlBar"])||void 0===r?void 0:r["progressControl"];if(l&&h){t.addClass("vjs-sprite-thumbnails");var c=new yi({i18n:i,store:d["a"],data:function(){return{time:0,name:"",mouseOnMaker:!1,visible:!1}},render:function(e){return e(vi,{props:{player:t,time:this.time,name:this.name,bottomOffset:21,visible:this.visible,progressWidth:h.currentWidth(),duration:t.duration()}})},methods:{updateTime:function(t){this.time=t},updateName:function(t){this.name=t},updateMouseOnMaker:function(t){this.mouseOnMaker=t}}});c.$mount(),e.thumbnailSpriteInstance=c;var u=o.contentEl(),p=l.contentEl(),f=l.updateTime;l.updateTime=function(t,e,i,n){c.mouseOnMaker||(c.time=i),f.call(this,t,e,i,n)},h.on("mousemove",(function(){return c.visible=!0})),h.on("touchmove",(function(){return c.visible=!0})),h.on("mouseleave",(function(){return c.visible=!1})),h.on("touchend",(function(){return c.visible=!1})),u.insertBefore(c.$el,p),l.hide()}}))}}]),i}(bi);u["default"].registerPlugin("thumbnailSprite",wi);var Ci=function(t,e){return Ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Ci(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function xi(t,e){function i(){this.constructor=t}Ci(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function Pi(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),s=0;for(e=0;e<i;e++)for(var a=arguments[e],r=0,o=a.length;r<o;r++,s++)n[s]=a[r];return n}var Mi=function(){function t(){this.events={}}return t.prototype.on=function(t,e,i){void 0===i&&(i=this),this.events[t]||(this.events[t]=[]),this.events[t].push([e,i])},t.prototype.once=function(t,e,i){var n=this;void 0===i&&(i=this);var s=function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];n.off(t,s),e.apply(i,a)};s.fn=e,this.on(t,s)},t.prototype.off=function(t,e){if(t||e){if(t){if(!e)return void(this.events[t]=[]);var i=this.events[t];if(!i)return;var n=i.length;while(n--)(i[n][0]===e||i[n][0]&&i[n][0].fn===e)&&i.splice(n,1)}}else this.events={}},t.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.events[t];if(n)for(var s=n.length,a=Pi(n),r=0;r<s;r++){var o=a[r],l=o[0],h=o[1];l&&l.apply(h,e)}},t.prototype.dispose=function(){this.events={}},t}();function ki(t){0}function Ti(t,e,i){return e<=i&&(t>=e&&t<=i)}function Si(t){return void 0!==t&&null!==t&&"function"===typeof t.then}function _i(t){Si(t)&&t.then(null,(function(){}))}var ji=5e3,Oi=2,$i=.3,Ii=1e3,Ei=1e3,Li=1,Ai=4,Di=.5,Hi=-.5,Bi=.25,Ri=.05,Wi=-.05,Vi="players-ready",zi="master-play",Ni="master-pause",Fi="master-rate-changes",Ui="master-ended",qi="master-time-update",Ki="buffering",Ji="buffered-and-auto-play",Gi="buffered-not-auto-play",Xi="synchronizing",Zi=function(t){function e(e,i,n){var s=t.call(this)||this;return s.masterPlayer=e,s.syncPlayers=i,s.audioPlayer=null,s.readyPlayers={},s.loadedPlayers={},s.isBuffering=!1,s.hitPauseWhileBuffering=!1,s.ignoreNextPause=!1,s.playWhenBuffered=!1,s.bufferCheckerSet=!1,s.lastSync=0,s.volume=1,s.withAudio=!1,s.useAudio=!1,s.isMuted=!1,n&&n.withAudio&&(s.withAudio=!0,s.audioPlayer=i[i.length-1]),s.players=Pi([s.masterPlayer],s.syncPlayers),s.initState(),s.bindMethods(),s.registerEvents(),s}return xi(e,t),e.prototype.playMaster=function(){this.allPlayersLoaded()&&this.play(this.masterPlayer)},e.prototype.pauseMaster=function(){this.allPlayersLoaded()&&this.pause(this.masterPlayer)},e.prototype.setCurrentTime=function(t){this.allPlayersLoaded()&&this.masterPlayer.currentTime(t)},e.prototype.unmute=function(t,e){return t&&e?(ki("[unmute] Unmuting video element id '"+t+"'"),t.volume(e),!0):(ki("[unmute] Undefined video element id '"+t+"'"),!1)},e.prototype.getVolume=function(t){return t?(ki("[volume] Getting volume from video element id '"+t.id()+"': "+t.volume()),t.volume()):(ki("[volume] Undefined video element id"),-1)},e.prototype.chooseAudio=function(t){var e=this;if(this.withAudio&&this.audioPlayer)if(t)ki("[chooseAudio] Master player choose audio player"),this.audioPlayer.src(t),this.synchronize(),this.audioPlayer.one("loadeddata",(function(){var t,i=e.getVolume(e.useAudio?e.audioPlayer:e.masterPlayer);e.volume=i,!e.useAudio&&e.masterPlayer.muted(!0),!e.useAudio&&e.unmute(e.audioPlayer,i),!e.useAudio&&(null===(t=e.audioPlayer)||void 0===t||t.muted(e.isMuted)),e.useAudio=!0,e.synchronize()}));else{ki("[chooseAudio] Master player cancel audio player");var i=this.getVolume(this.useAudio?this.audioPlayer:this.masterPlayer);this.volume=i,this.useAudio&&this.audioPlayer.muted(!0),this.useAudio&&this.masterPlayer.muted(this.isMuted),this.useAudio=!1,this.synchronize()}},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.clearMasterPlayerEvent(),this.readyPlayers={},this.loadedPlayers={}},e.prototype.initState=function(){var t=this;this.players.forEach((function(e){var i=e.id();t.readyPlayers[i]=!1,t.loadedPlayers[i]=!1}))},e.prototype.bindMethods=function(){var t=this,e=["onMasterPlay","onMasterPause","onMasterRateChange","onMasterEnded","onMasterTimeUpdate","checkBuffer"];e.forEach((function(e){t[e]=t[e].bind(t)}))},e.prototype.registerEvents=function(){var t=this;this.waitAllPlayersReady((function(){t.registerMasterPlayerEvent(),t.trigger(Vi)}))},e.prototype.waitAllPlayersReady=function(t){var e=this;this.players.forEach((function(i){i.ready((function(){var n=i.id();e.readyPlayers[n]=!0,e.waitDataLoaded(i,(function(){e.loadedPlayers[n]=!0,e.allPlayersLoaded()&&t()}))}))}))},e.prototype.waitDataLoaded=function(t,e){var i=!1,n=setTimeout((function(){i=!0,e()}),ji);t.one("loadeddata",(function(){clearTimeout(n),i||e()}))},e.prototype.registerMasterPlayerEvent=function(){this.masterPlayer.on("play",this.onMasterPlay),this.masterPlayer.on("pause",this.onMasterPause),this.masterPlayer.on("ratechange",this.onMasterRateChange),this.masterPlayer.on("ended",this.onMasterEnded),this.masterPlayer.on("timeupdate",this.onMasterTimeUpdate)},e.prototype.clearMasterPlayerEvent=function(){this.masterPlayer.off("play",this.onMasterPlay),this.masterPlayer.off("pause",this.onMasterPause),this.masterPlayer.off("ratechange",this.onMasterRateChange),this.masterPlayer.off("ended",this.onMasterEnded),this.masterPlayer.off("timeupdate",this.onMasterTimeUpdate)},e.prototype.onMasterPlay=function(){ki("Master player received 'play' event"),this.hitPauseWhileBuffering=!1,this.setBufferChecker(),this.playSyncPlayers(),this.trigger(zi,this.masterPlayer.currentTime())},e.prototype.onMasterPause=function(){ki("Master player received 'pause' event"),this.hitPauseWhileBuffering=!this.ignoreNextPause,this.ignoreNextPause=!1,this.trigger(Ni,this.masterPlayer.currentTime())},e.prototype.onMasterRateChange=function(){ki("Master player received 'ratechange' event");var t=this.masterPlayer.playbackRate();this.setSyncPlayersPlayRate(t),this.trigger(Fi,t)},e.prototype.onMasterEnded=function(){ki("Master player received 'ended' event"),this.hitPauseWhileBuffering=!0,this.pauseAll(!1),this.synchronize(),this.trigger(Ui,this.masterPlayer.duration())},e.prototype.onMasterTimeUpdate=function(){ki("Master player received 'timeupdate' event"),this.hitPauseWhileBuffering=this.hitPauseWhileBuffering||!this.masterPlayer.paused(),(Date.now()-this.lastSync>=Ei||this.masterPlayer.paused())&&this.synchronize(),this.trigger(qi,this.masterPlayer.currentTime())},e.prototype.playSyncPlayers=function(){var t=this,e=this.syncPlayers.length-1;this.syncPlayers.forEach((function(i,n){t.play(i),n<e?t.mute(i):t.useAudio&&t.withAudio||t.mute(i)}))},e.prototype.setSyncPlayersPlayRate=function(t){this.syncPlayers.forEach((function(e){e.playbackRate(t)}))},e.prototype.synchronize=function(){var t=this;this.lastSync=Date.now(),this.syncPlayers.forEach((function(e){var i=!1,n=t.masterPlayer.paused(),s=t.getSyncDelay(e);if(n)i=!0;else{var a=e.playbackRate(),r=t.masterPlayer.playbackRate();if(s>Ri||s<Wi){if(Math.abs(s)<Ai){var o=r;s>0?(o+=Hi,ki('[synchronize] Decreasing playback rate of player "'+e.id()+'" from '+a+" to "+o)):(o+=Di,ki('[synchronize] Increasing playback rate of player "'+e.id()+'" from '+a+" to "+o)),e.playbackRate(o)}else e.playbackRate(r),i=!0;t.trigger(Xi,[t.masterPlayer,e])}else e.playbackRate(r),ki('[synchronize] Playing player "'+e.id()+'"'),t.play(e)}if(i){var l=t.masterPlayer.currentTime(),h=n?l:l+Bi;ki('[synchronize] Seeking player "'+e.id()+'": '+h),e.currentTime(h),n?(t.pause(e),ki('[synchronize] Pause player "'+e.id()+'" after seeking')):(t.play(e),ki('[synchronize] Playing player "'+e.id()+'" after seeking')),t.trigger(Xi,[t.masterPlayer,e])}}))},e.prototype.getSyncDelay=function(t){var e=this.masterPlayer.currentTime(),i=t.currentTime();return-1===e||-1===i||Ti(i,e-Li,e)?0:i-e},e.prototype.setBufferChecker=function(){this.bufferCheckerSet||(this.bufferCheckerSet=!0,window.clearTimeout(this.checkTimer),this.checkTimer=window.setTimeout(this.checkBuffer,Ii))},e.prototype.checkBuffer=function(){var t=!0;this.players.some((function(e){for(var i=e.buffered(),n=e.duration(),s=Math.min(e.currentTime()+Oi,n),a=!1,r=0;r<i.length&&!a;r++){var o=i.start(r),l=i.end(r)+$i;Ti(s,o,l)&&(a=!0)}if(t=t&&a,!t)return!0})),this.isBuffering=!t,t?this.playWhenBuffered&&!this.hitPauseWhileBuffering?(this.playWhenBuffered=!1,this.play(this.masterPlayer),this.trigger(Ji)):this.playWhenBuffered&&(this.playWhenBuffered=!1,this.trigger(Gi)):(this.playWhenBuffered=!0,this.ignoreNextPause=!0,this.pauseAll(!0),ki("[checkBuffer] buffering"),this.trigger(Ki)),this.checkTimer=window.setTimeout(this.checkBuffer,Ii)},e.prototype.allPlayersLoaded=function(){var t=this;return Object.keys(this.loadedPlayers).every((function(e){return t.loadedPlayers[e]}))},e.prototype.allPlayersReady=function(){var t=this;return Object.keys(this.readyPlayers).every((function(e){return t.readyPlayers[e]}))},e.prototype.pauseAll=function(t){var e=this;this.players.forEach((function(i){(t&&i===e.masterPlayer||i!==e.masterPlayer)&&e.pause(i)}))},e.prototype.play=function(t){return!!t.paused()&&(this.allPlayersReady()?this.isBuffering?(ki("[play]  A player is currently buffering"),!1):(_i(t.play()),!0):(ki("[play] Not all players are ready, yet"),!1))},e.prototype.pause=function(t){t.pause(),ki("[pause] Pausing Player "+t.id())},e.prototype.mute=function(t){t.volume(0),ki("[mute] Muting Player "+t.id())},e}(Mi);function Qi(t,e,i){return new Zi(t,e,i)}var Yi=Qi,tn=i("6503"),en=i("5729"),nn=i("2d2e"),sn=i("466a"),an={name:"video-player",mixins:[nn["a"],sn["a"]],components:{Transcript:en["a"]},data:function(){return{viewWidth:"100%",viewHeight:"100%",shareWidth:"100%",shareHeight:"100%",panelRWidth:"100%",panelRPrevWidth:"",playerViewWrapperWidth:"100%",playerViewPreWrapperWidth:"",playerReady:!1,player:null,syncWithAudio:null}},computed:Object(a["a"])(Object(a["a"])({interpreterList:function(){return this.interpreterAudioList||[]},hasInterpreterList:function(){return this.interpreterList&&this.interpreterList.length>0},playerViewStyl:function(){return{width:this.viewWidth+"px",height:this.viewHeight+"px"}},playerShareStyl:function(){return{width:this.shareWidth+"px",height:this.shareHeight+"px"}},panelRStyl:function(){return{width:this.panelRWidth}},playerViewWrapperStyl:function(){return{width:this.playerViewWrapperWidth}},showTrimControl:function(){return(this.hasOrigin||this.trimming)&&!this.useFakeTrim&&this.hasTrimPermission},showHighlightControl:function(){return!this.isHighlightFile&&this.enableHighlight&&this.canEditHighlight&&(this.hasPermissionEdit||this.hasHighlight)&&!(!this.useFakeTrim&&this.trimming)},videoPlayerCls:function(){var t=[];return(this.hasTranscript||this.hasChat)&&t.push("has-transcript"),this.shareStart&&t.push("start-share"),(this.popMarkerShow||this.popMenuShow)&&t.push("has-pop-overlay"),this.showHighlightControl&&t.push("has-highlight"),this.showTrimControl&&t.push("trim-derived"),this.viewResolvtionsHeight||t.push("uploaded"),t.join(" ")},hasHighlight:function(){var t=this.computedHighlights;return t&&t.length},needLoadChapter:function(){return this.shareMp4Url&&this.chapterUrl}},Object(p["e"])(["shareMp4Url","viewMp4Url","gallaryMp4Url","chapterUrl","ccUrl","transcriptUrl","shareResolvtionsWidth","shareResolvtionsHeight","viewResolvtionsWidth","viewResolvtionsHeight","playbackModel","autoPlay","popMarkerShow","popMenuShow","continueMode","nextClipStartTime","shareStart","speed","enableHighlight","canEditHighlight","isHighlightFile","hasPermissionEdit","trimming","useFakeTrim","zoomNote","offsetStart","offsetEnd","interpreterAudioList","thumbnail"])),Object(p["c"])(["hasTranscript","hasChat","computedHighlights","hasOrigin","hasTrimPermission"])),mounted:function(){this.createPlayer(),this.shareMp4Url&&this.createSharePlayer(),this.hasInterpreterList&&this.createAudioPlayer(),this.shareMp4Url&&this.hasInterpreterList?this.syncWithAudio=Yi(this.player,[this.sharePlayer,this.audioPlayer],{withAudio:!0}):this.shareMp4Url?this.syncWithAudio=Yi(this.player,[this.sharePlayer]):this.hasInterpreterList&&(this.syncWithAudio=Yi(this.player,[this.audioPlayer],{withAudio:!0})),Object(tn["a"])(this.$el,this.layout),this.showMessage()},beforeDestroy:function(){var t=this.player,e=this.sharePlayer,i=this.audioPlayer;t.off(),t.dispose(),e&&(e.off(),e.dispose()),i&&(i.off(),i.dispose()),Object(tn["b"])(this.$el,this.layout)},methods:Object(a["a"])({createAudioPlayer:function(){var t="GV"===this.playbackModel&&this.gallaryMp4Url?this.gallaryMp4Url:this.viewMp4Url;this.audioPlayer=Object(u["default"])(this.$refs.audioPlayer,{controls:!1,preload:"auto",autoplay:ze["c"],sources:{src:t,type:"audio/mp4"},bigPlayButton:!1,muted:!0,controlBar:!1,textTrackDisplay:!1})},createPlayer:function(){var t=this,e="GV"===this.playbackModel&&this.gallaryMp4Url?this.gallaryMp4Url:this.viewMp4Url,i=this.zoomNote?"application/x-mpegURL":"video/mp4",n={nativeTextTracks:!1};if(this.zoomNote){var s=e.split("?")[1];u["default"].Vhs.xhr.beforeRequest=function(t){return t.uri.endsWith(".ts")&&(t.uri=t.uri+"?"+s),t},n.vhs={overrideNative:!0,withCredentials:!0}}this.player=Object(u["default"])(this.$refs.player,{controls:!0,preload:"auto",autoplay:this.autoPlay||ze["c"],bigPlayButton:!1,language:O["b"],sources:{src:e,type:i},controlBar:{currentTimeDisplay:!1,durationDisplay:!1,remainingTimeDisplay:!1,captionsButton:!1,textTrackSettings:!1,subtitlesButton:!1,descriptionsButton:!1,chaptersButton:!1,liveDisplay:!1,timeDivider:!1,playbackRateMenuButton:!1,audioTrackButton:!1,customControlSpacer:!1,fullscreenToggle:!1,pictureInPictureToggle:!1,seekToLive:!1,subsCapsButton:!1},html5:n},(function(){var e=t.player,i=t.sharePlayer;e.one("loadeddata",(function(){var n=t.offsetStart,s=t.offsetEnd;t.reorderControlBar(),t.registerPlugins(),n>0&&n<s&&e.currentTime(0),e.on("fullscreenchange",(function(){setTimeout((function(){!e.isFullscreen()&&t.shareStart?(t.move(),e.trigger("player-resize",{mainPlayerWidth:i.contentEl().clientWidth})):(t.moveBack(),e.trigger("player-resize",{mainPlayerWidth:e.contentEl().clientWidth})),t.$forceUpdate()}),0)})),i&&i.on("fullscreenchange",(function(){setTimeout((function(){i.isFullscreen()||t.shareStart?(t.move(),e.trigger("player-resize",{mainPlayerWidth:i.contentEl().clientWidth})):(t.moveBack(),e.trigger("player-resize",{mainPlayerWidth:e.contentEl().clientWidth})),t.$forceUpdate()}),0)})),t.layout(),t.playerReady=!0})),e.on("share-start",(function(n,s){t.setShareStart(s),s?e.isFullscreen()||i.isFullscreen()||t.move():e.isFullscreen()||i.isFullscreen()||t.moveBack()})),ze["c"]||e.one("suspend",(function(){0===e.currentTime()&&e.currentTime(.01)})),e.on("play",(function(){var i=t.speed;ze["a"]&&1!==i&&e.playbackRate(i),t.setCheckInterval()})),e.on("pause",(function(){t.clearCheckInterval()})),e.on("ended",(function(){t.clearCheckInterval(),1===t.continueMode&&-1!==t.nextClipStartTime||(e.currentTime(0),e.pause())})),e.on("timeupdate",t.updateTime),e.on("layout",t.layout)}))},createSharePlayer:function(){var t=this;this.sharePlayer=Object(u["default"])(this.$refs.sharePlayer,{controls:!0,preload:"auto",autoplay:ze["c"],sources:{src:this.shareMp4Url,type:"video/mp4"},bigPlayButton:!1,muted:!0,controlBar:!1,textTrackDisplay:!1},(function(){var e=t.player,i=t.sharePlayer;i.tech().on("mouseup",(function(t){0===t.button&&(e.paused()?e.play():e.pause())}))}))},reorderControlBar:function(){var t=this.player,e=t.controlBar.contentEl(),i=t.controlBar.progressControl.contentEl(),n=t.controlBar.playToggle.contentEl();e.insertBefore(i,n)},registerPlugins:function(){var t=this,e=this.player,i=this.sharePlayer,n=this.audioPlayer,s=this.syncWithAudio,a=["multipleClip","timeRange","customTitle","fixAria","bigPlayButton","extendControl","speed","languageAudioLib","highlights","playbackRange","preview","captions","playbackModel","fullscreenToggle","contextMenu","chapterMarker","shareMarker","pollResult","thumbnailSprite","keyboardShortcuts"],r=["timeRange","customTitle","fixAria","bigPlayButton","extendControl","speed","fullscreenToggle","keyboardShortcuts"],o=this.zoomNote?r:a;o.forEach((function(a){var r="languageAudioLib"===a&&t.hasInterpreterList;(r||"languageAudioLib"!==a)&&e[a]({sharePlayer:i,audioPlayer:n,synchronize:s})}))},shouldShowSharePanel:function(){var t=this.sharePlayer,e=this.shareStart;return t&&t.isFullscreen()||e},layout:function(){this.shareStart&&this.sharePlayerLayout(),this.playerLayout(),this.player.trigger("player-resize",{mainPlayerWidth:this.shareStart?this.shareWidth:this.viewWidth})},computedWrapperHeight:function(t){return this.showTrimControl||this.showHighlightControl?(this.showTrimControl&&(t-=48),this.showHighlightControl&&(t-=40)):t-=40,t},playerLayout:function(){var t=this.$refs.playerViewWrapper,e=t.clientWidth,i=t.clientHeight,n=this.computedWrapperHeight(i),s=this.viewResolvtionsWidth,a=this.viewResolvtionsHeight;this.shareStart?(this.viewWidth=e,this.viewHeight=e*a/s):(this.viewHeight=Math.min(n,e*a/s),this.viewWidth=this.viewHeight*s/a)},sharePlayerLayout:function(){var t=this.$refs.playerShareWrapper,e=t.clientWidth,i=t.clientHeight,n=this.computedWrapperHeight(i),s=this.shareResolvtionsWidth,a=this.shareResolvtionsHeight;this.shareHeight=Math.min(n,e*a/s),this.shareWidth=this.shareHeight*s/a},onMouseDown:function(t){var e=this,i=this.player,n=t.clientX,s=this.$el.clientWidth,a=2*s/5,r=s/5,o=this.$refs.panelR.clientWidth,l=i.paused();l||i.pause(),this.onMouseMove=function(t){var i=t.clientX-n,l=o-i;e.layout(),e.panelRPrevWidth=Math.min(a,Math.max(l,r)),e.panelRWidth=e.panelRPrevWidth+"px",e.playerViewPreWrapperWidth="calc(".concat(100*(s-e.panelRPrevWidth)/s,"% - 20px)"),t.stopPropagation(),t.preventDefault()},this.onMouseUp=function(){l||i.play(),document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp)},document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove)},move:function(){var t=document.activeElement,e=this.player,i=this.sharePlayer,n=e.controlBar.contentEl(),s=i.contentEl();s.appendChild(n);var a=e.playbackRange().backRangeSettingComp;if(a){var r=a.$el;s.appendChild(r)}var o=e.textTrackDisplay.contentEl();s.appendChild(o);var l=e.contextMenu().contextMenuComp;if(l){var h=l.$el;s.appendChild(h)}var c=e.bigPlayButton().comp.$el;s.appendChild(c);var u=e.keyboardShortcuts().comp.$el;s.appendChild(u);var d=e.multipleClip().upcomingComp;if(d){var p=d.$el;s.appendChild(p)}var f=this.$refs.gettyNotice;if(f){var m=f.$el;s.insertBefore(m,n)}var g=e.highlights().highlightsSettingComp;if(g){var v=g.$el;s.appendChild(v)}var y=e.highlights().highlightsControlComp;if(y){var b=y.$el;s.appendChild(b)}var w=e.playbackRange().trimControlComp;if(w){var C=w.$el;s.appendChild(C)}var x=e.playbackRange().loadingComp;if(x){var P=x.$el;s.appendChild(P)}this.$nextTick((function(){t.focus()}))},moveBack:function(){var t=document.activeElement,e=this.player,i=e.contentEl(),n=e.controlBar.contentEl();i.appendChild(n);var s=e.playbackRange().backRangeSettingComp;if(s){var a=s.$el;i.appendChild(a)}var r=e.textTrackDisplay.contentEl();i.appendChild(r);var o=e.contextMenu().contextMenuComp;if(o){var l=o.$el;i.appendChild(l)}var h=e.bigPlayButton().comp.$el;i.appendChild(h);var c=e.keyboardShortcuts().comp.$el;i.appendChild(c);var u=e.multipleClip().upcomingComp;if(u){var d=u.$el;i.appendChild(d)}var p=this.$refs.gettyNotice;if(p){var f=p.$el;i.insertBefore(f,n)}var m=e.highlights().highlightsSettingComp;if(m){var g=m.$el;i.appendChild(g)}var v=e.highlights().highlightsControlComp;if(v){var y=v.$el;i.appendChild(y)}var b=e.playbackRange().trimControlComp;if(b){var w=b.$el;i.appendChild(w)}var C=e.playbackRange().loadingComp;if(C){var x=C.$el;i.appendChild(x)}this.$nextTick((function(){t.focus()}))}},Object(p["d"])({setShareStart:"SET_SHARE_START"})),watch:{shareStart:{immediate:!0,handler:function(t){this.panelRWidth=t?this.panelRPrevWidth?this.panelRPrevWidth+"px":"25%":"100%",this.playerViewWrapperWidth=t||!this.hasTranscript&&!this.hasChat?"100%":this.playerViewPreWrapperWidth?this.playerViewPreWrapperWidth:"calc(75% - 20px)",this.$nextTick(this.layout)}}}},rn=an,on=(i("b040"),Object(x["a"])(rn,n,s,!1,null,"45756366",null));e["default"]=on.exports},"3ea5":function(t,e,i){},"487e":function(t,e,i){"use strict";i("82f0")},"4f84":function(t,e,i){"use strict";i("3ea5")},"593a":function(t,e,i){"use strict";i("dd98")},"5bd4":function(t,e,i){},"7a1a":function(t,e,i){},"7d99":function(t,e,i){"use strict";i("325e")},"7f0d":function(t,e,i){"use strict";i("c3f0")},"82f0":function(t,e,i){},"8a79":function(t,e,i){"use strict";var n=i("23e7"),s=i("e330"),a=i("06cf").f,r=i("50c4"),o=i("577e"),l=i("5a34"),h=i("1d80"),c=i("ab13"),u=i("c430"),d=s("".endsWith),p=s("".slice),f=Math.min,m=c("endsWith"),g=!u&&!m&&!!function(){var t=a(String.prototype,"endsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!g&&!m},{endsWith:function(t){var e=o(h(this));l(t);var i=arguments.length>1?arguments[1]:void 0,n=e.length,s=void 0===i?n:f(r(i),n),a=o(t);return d?d(e,a,s):p(e,s-a.length,s)===a}})},"9a94":function(t,e,i){},a71c:function(t,e,i){"use strict";i("0611")},adb9:function(t,e,i){"use strict";i("5bd4")},b040:function(t,e,i){"use strict";i("08b9")},b2c1:function(t,e,i){},b373:function(t,e,i){"use strict";i("7a1a")},c013:function(t,e,i){"use strict";i("2208")},c3f0:function(t,e,i){},c5d7:function(t,e,i){"use strict";i("3877")},d49a:function(t,e,i){"use strict";i("b2c1")},dd98:function(t,e,i){},f8f7:function(t,e,i){"use strict";i("9a94")}}]);